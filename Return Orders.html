<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Return Orders Management System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.5;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            margin-bottom: 25px;
            border-bottom: 1px solid #e1e5eb;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo-icon {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }
        
        .logo-text h1 {
            font-size: 24px;
            font-weight: 700;
            color: #1f2937;
        }
        
        .logo-text p {
            font-size: 13px;
            color: #6b7280;
            margin-top: 2px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .user-avatar {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 16px;
        }
        
        .user-details h3 {
            font-size: 15px;
            font-weight: 600;
            color: #1f2937;
        }
        
        .user-details p {
            font-size: 13px;
            color: #6b7280;
        }
        
        .page-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 25px;
            color: #1f2937;
        }
        
        /* Stats Section */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 18px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border: 1px solid #e5e7eb;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.08);
            border-color: #d1d5db;
        }
        
        .stat-card.active {
            border-color: #4f46e5;
            background-color: #f8fafc;
            box-shadow: 0 6px 16px rgba(79, 70, 229, 0.12);
        }
        
        .stat-card.active::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background-color: #4f46e5;
        }
        
        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }
        
        .stat-title {
            font-size: 14px;
            color: #6b7280;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stat-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: white;
        }
        
        .stat-count {
            font-size: 32px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 8px;
        }
        
        .stat-change {
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .stat-change.positive {
            color: #10b981;
        }
        
        .stat-change.negative {
            color: #ef4444;
        }
        
        /* Main Content Area */
        .content-area {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border: 1px solid #e5e7eb;
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .content-header {
            padding: 22px 25px;
            background-color: #f9fafb;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .content-title {
            font-size: 20px;
            font-weight: 600;
            color: #1f2937;
        }
        
        .content-subtitle {
            font-size: 14px;
            color: #6b7280;
            margin-top: 5px;
        }
        
        /* Bulk Actions Section */
        .bulk-actions {
            padding: 18px 25px;
            background-color: #f0f9ff;
            border-bottom: 1px solid #e0f2fe;
            display: none;
            align-items: center;
            justify-content: space-between;
        }
        
        .bulk-actions.active {
            display: flex;
        }
        
        .selected-count {
            font-size: 15px;
            font-weight: 500;
            color: #0369a1;
        }
        
        .bulk-buttons {
            display: flex;
            gap: 10px;
        }
        
        .bulk-btn {
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            border: 1px solid;
            transition: all 0.2s;
        }
        
        .bulk-btn.process {
            background-color: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        
        .bulk-btn.process:hover {
            background-color: #2563eb;
        }
        
        .bulk-btn.edit {
            background-color: #10b981;
            color: white;
            border-color: #10b981;
        }
        
        .bulk-btn.edit:hover {
            background-color: #0da271;
        }
        
        .bulk-btn.cancel {
            background-color: white;
            color: #6b7280;
            border-color: #d1d5db;
        }
        
        .bulk-btn.cancel:hover {
            background-color: #f9fafb;
        }
        
        .bulk-btn.export {
            background-color: #8b5cf6;
            color: white;
            border-color: #8b5cf6;
        }
        
        .bulk-btn.export:hover {
            background-color: #7c3aed;
        }
        
        /* Search Section */
        .search-section {
            padding: 25px;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .search-box {
            display: flex;
            gap: 12px;
            margin-bottom: 18px;
        }
        
        .search-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.2s;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }
        
        .search-btn {
            background-color: #4f46e5;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0 24px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .search-btn:hover {
            background-color: #4338ca;
        }
        
        .suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .suggestion-tag {
            background-color: #f3f4f6;
            color: #4b5563;
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #f3f4f6;
        }
        
        .suggestion-tag:hover {
            background-color: #e5e7eb;
            border-color: #d1d5db;
        }
        
        /* PICKUPS TABLE - EXACTLY LIKE IN IMAGE */
        .pickups-table-section {
            padding: 25px;
        }
        
        .pickups-table-container {
            overflow-x: auto;
            margin-top: 20px;
        }
        
        .pickups-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 1000px;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .pickups-table thead {
            background-color: #f8fafc;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .pickups-table th {
            text-align: left;
            padding: 16px 20px;
            font-weight: 600;
            color: #374151;
            font-size: 14px;
            white-space: nowrap;
            border-right: 1px solid #e5e7eb;
        }
        
        .pickups-table th:last-child {
            border-right: none;
        }
        
        .pickups-table td {
            padding: 16px 20px;
            border-bottom: 1px solid #f3f4f6;
            font-size: 14px;
            border-right: 1px solid #f3f4f6;
        }
        
        .pickups-table td:last-child {
            border-right: none;
        }
        
        .pickups-table tbody tr {
            transition: background-color 0.15s;
        }
        
        .pickups-table tbody tr:hover {
            background-color: #f9fafb;
        }
        
        .pickups-table tbody tr.selected {
            background-color: #f0f9ff;
        }
        
        .pickups-table tbody tr:last-child td {
            border-bottom: none;
        }
        
        /* Regular Table Section (for other statuses) */
        .table-section {
            padding: 0;
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 1200px;
        }
        
        thead {
            background-color: #f9fafb;
        }
        
        th {
            text-align: left;
            padding: 18px 20px;
            font-weight: 600;
            color: #374151;
            border-bottom: 1px solid #e5e7eb;
            font-size: 14px;
            white-space: nowrap;
        }
        
        td {
            padding: 16px 20px;
            border-bottom: 1px solid #f3f4f6;
            font-size: 14px;
        }
        
        tbody tr {
            transition: background-color 0.15s;
        }
        
        tbody tr:hover {
            background-color: #f9fafb;
        }
        
        tbody tr.selected {
            background-color: #f0f9ff;
        }
        
        .checkbox-cell {
            width: 40px;
            text-align: center;
        }
        
        .order-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .manifest-id, .order-id {
            color: #4f46e5;
            font-weight: 600;
            cursor: pointer;
        }
        
        .manifest-id:hover, .order-id:hover {
            text-decoration: underline;
        }
        
        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
        }
        
        .status-new {
            background-color: #dbeafe;
            color: #1d4ed8;
        }
        
        .status-confirmed {
            background-color: #dcfce7;
            color: #166534;
        }
        
        .status-ready {
            background-color: #fef3c7;
            color: #92400e;
        }
        
        .status-pickup {
            background-color: #f3e8ff;
            color: #6b21a8;
        }
        
        .status-transit {
            background-color: #e0f2fe;
            color: #075985;
        }
        
        .status-exception {
            background-color: #fee2e2;
            color: #991b1b;
        }
        
        .status-returned {
            background-color: #dcfce7;
            color: #166534;
        }
        
        .status-held {
            background-color: #f5f5f5;
            color: #525252;
        }
        
        .status-cancelled {
            background-color: #f5f5f5;
            color: #991b1b;
            text-decoration: line-through;
        }
        
        .no-data {
            text-align: center;
            padding: 60px 20px;
            color: #9ca3af;
            background: white;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            margin: 20px 25px;
        }
        
        .no-data i {
            font-size: 48px;
            margin-bottom: 15px;
            color: #d1d5db;
        }
        
        .no-data p {
            font-size: 16px;
        }
        
        /* Footer Actions */
        .footer-actions {
            padding: 20px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid #e5e7eb;
            background-color: #f9fafb;
        }
        
        .pagination {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .pagination-btn {
            width: 36px;
            height: 36px;
            border-radius: 6px;
            border: 1px solid #d1d5db;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .pagination-btn:hover {
            background-color: #f3f4f6;
        }
        
        .pagination-btn.active {
            background-color: #4f46e5;
            color: white;
            border-color: #4f46e5;
        }
        
        .action-buttons {
            display: flex;
            gap: 12px;
        }
        
        .action-btn {
            padding: 10px 18px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            border: 1px solid #d1d5db;
            background: white;
        }
        
        .action-btn.primary {
            background-color: #4f46e5;
            color: white;
            border-color: #4f46e5;
        }
        
        .action-btn.primary:hover {
            background-color: #4338ca;
        }
        
        .action-btn:hover {
            background-color: #f9fafb;
        }
        
        /* Footer */
        footer {
            text-align: center;
            padding: 25px 0;
            color: #6b7280;
            font-size: 14px;
            border-top: 1px solid #e5e7eb;
            margin-top: 20px;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background: #1f2937;
            color: white;
            padding: 16px 22px;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            z-index: 1000;
            font-weight: 500;
            transform: translateY(100px);
            opacity: 0;
            transition: transform 0.3s, opacity 0.3s;
            max-width: 350px;
        }
        
        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .notification.success {
            background-color: #10b981;
        }
        
        .notification.error {
            background-color: #ef4444;
        }
        
        .notification.info {
            background-color: #3b82f6;
        }
        
        /* Action buttons in table */
        .table-actions {
            display: flex;
            gap: 8px;
        }
        
        .table-action-btn {
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            border: 1px solid #d1d5db;
            background: white;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .table-action-btn:hover {
            transform: translateY(-1px);
        }
        
        .table-action-btn.view {
            color: #3b82f6;
            border-color: #bfdbfe;
            background-color: #eff6ff;
        }
        
        .table-action-btn.view:hover {
            background-color: #dbeafe;
        }
        
        .table-action-btn.edit {
            color: #10b981;
            border-color: #a7f3d0;
            background-color: #ecfdf5;
        }
        
        .table-action-btn.edit:hover {
            background-color: #d1fae5;
        }
        
        .table-action-btn.delete {
            color: #ef4444;
            border-color: #fecaca;
            background-color: #fef2f2;
        }
        
        .table-action-btn.delete:hover {
            background-color: #fee2e2;
        }
        
        /* Bulk Actions Menu (NEW) */
        .bulk-actions-menu {
            display: none;
            position: fixed;
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border: 1px solid #e5e7eb;
            z-index: 1001;
            min-width: 220px;
            overflow: hidden;
        }
        
        .bulk-actions-menu.active {
            display: block;
        }
        
        .bulk-menu-item {
            padding: 12px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: background-color 0.2s;
            border-bottom: 1px solid #f3f4f6;
        }
        
        .bulk-menu-item:last-child {
            border-bottom: none;
        }
        
        .bulk-menu-item:hover {
            background-color: #f9fafb;
        }
        
        .bulk-menu-item.delete {
            color: #ef4444;
        }
        
        .bulk-menu-item.delete:hover {
            background-color: #fef2f2;
        }
        
        .bulk-menu-item i {
            width: 20px;
            text-align: center;
        }
        
        .bulk-actions-dropdown {
            position: relative;
        }
        
        .bulk-actions-dropdown-btn {
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            border: 1px solid #d1d5db;
            background: white;
            transition: all 0.2s;
        }
        
        .bulk-actions-dropdown-btn:hover {
            background-color: #f9fafb;
        }
        
        .bulk-actions-dropdown-btn i.fa-chevron-down {
            font-size: 12px;
            margin-left: 4px;
        }
        
        /* Pickup Edit Modal */
        .pickup-edit-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        .pickup-edit-modal.active {
            display: flex;
        }
        
        .pickup-edit-container {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .pickup-edit-header {
            padding: 22px 25px;
            background-color: #4f46e5;
            color: white;
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .pickup-edit-title {
            font-size: 20px;
            font-weight: 600;
        }
        
        .close-pickup-edit {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }
        
        .close-pickup-edit:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .pickup-edit-content {
            padding: 25px;
        }
        
        .pickup-edit-item {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .pickup-edit-item-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #1f2937;
        }
        
        .pickup-edit-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .pickup-edit-actions {
            padding: 20px 25px;
            background-color: #f9fafb;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            border-radius: 0 0 12px 12px;
        }
        
        .pickup-edit-action-btn {
            padding: 10px 18px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border: 1px solid #d1d5db;
            background: white;
            transition: all 0.2s;
        }
        
        .pickup-edit-action-btn.save {
            background-color: #4f46e5;
            color: white;
            border-color: #4f46e5;
        }
        
        .pickup-edit-action-btn.save:hover {
            background-color: #4338ca;
        }
        
        .pickup-edit-action-btn.cancel {
            background-color: white;
            color: #6b7280;
        }
        
        .pickup-edit-action-btn.cancel:hover {
            background-color: #f9fafb;
        }
        
        @media (max-width: 1024px) {
            .stats-container {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .stats-container {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .content-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .bulk-actions {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .bulk-buttons {
                width: 100%;
                justify-content: flex-start;
            }
            
            .search-box {
                flex-direction: column;
            }
            
            .footer-actions {
                flex-direction: column;
                gap: 20px;
                align-items: flex-start;
            }
            
            .action-buttons {
                width: 100%;
                justify-content: flex-start;
            }
            
            .table-actions {
                flex-direction: column;
                gap: 5px;
            }
            
            .pickup-edit-form {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 576px) {
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .bulk-buttons {
                flex-wrap: wrap;
            }
            
            .action-buttons {
                flex-wrap: wrap;
            }
        }
        
        /* Edit Page Styles - Hidden by default */
        .edit-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        .edit-page.active {
            display: flex;
        }
        
        .edit-container {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .edit-header {
            padding: 22px 25px;
            background-color: #4f46e5;
            color: white;
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .edit-title {
            font-size: 20px;
            font-weight: 600;
        }
        
        .close-edit {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }
        
        .close-edit:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .edit-content {
            padding: 25px;
        }
        
        .edit-item {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .edit-item-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #1f2937;
        }
        
        .edit-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #374151;
            font-size: 14px;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.2s;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }
        
        .edit-actions {
            padding: 20px 25px;
            background-color: #f9fafb;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            border-radius: 0 0 12px 12px;
        }
        
        .edit-action-btn {
            padding: 10px 18px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border: 1px solid #d1d5db;
            background: white;
            transition: all 0.2s;
        }
        
        .edit-action-btn.save {
            background-color: #4f46e5;
            color: white;
            border-color: #4f46e5;
        }
        
        .edit-action-btn.save:hover {
            background-color: #4338ca;
        }
        
        .edit-action-btn.cancel {
            background-color: white;
            color: #6b7280;
        }
        
        .edit-action-btn.cancel:hover {
            background-color: #f9fafb;
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-section">
                <div class="logo-icon">
                    <i class="fas fa-exchange-alt"></i>
                </div>
                <div class="logo-text">
                    <h1>ReturnFlow Pro</h1>
                    <p>Order Management System</p>
                </div>
            </div>
            <div class="user-info">
                <div class="user-details">
                    <h3>Admin User</h3>
                    <p>Last login: Today, 10:30 AM</p>
                </div>
                <div class="user-avatar">AU</div>
            </div>
        </header>
        
        <h2 class="page-title">Return Orders Dashboard</h2>
        
        <div class="stats-container" id="statsContainer">
            <!-- Stats will be loaded by JavaScript -->
        </div>
        
        <div class="content-area" id="contentArea">
            <!-- Content will be loaded by JavaScript -->
        </div>
        
        <footer>
            <p>ReturnFlow Pro &copy; 2023 • Version 3.2 • Data last updated: Today, 09:45 AM</p>
        </footer>
    </div>
    
    <!-- Bulk Actions Menu (NEW) -->
    <div class="bulk-actions-menu" id="bulkActionsMenu">
        <div class="bulk-menu-item" data-action="process">
            <i class="fas fa-cog" style="color: #3b82f6;"></i>
            <span>Process Selected</span>
        </div>
        <div class="bulk-menu-item" data-action="edit">
            <i class="fas fa-edit" style="color: #10b981;"></i>
            <span>Edit Selected</span>
        </div>
        <div class="bulk-menu-item delete" data-action="delete">
            <i class="fas fa-trash"></i>
            <span>Delete Selected</span>
        </div>
        <div class="bulk-menu-item" data-action="export">
            <i class="fas fa-file-export" style="color: #8b5cf6;"></i>
            <span>Export Selected</span>
        </div>
        <div class="bulk-menu-item" data-action="cancel">
            <i class="fas fa-times" style="color: #6b7280;"></i>
            <span>Cancel Selected</span>
        </div>
    </div>
    
    <!-- Pickup Edit Modal -->
    <div class="pickup-edit-modal" id="pickupEditModal">
        <div class="pickup-edit-container">
            <div class="pickup-edit-header">
                <div class="pickup-edit-title" id="pickupEditTitle">Edit Pickup Manifest</div>
                <button class="close-pickup-edit" id="closePickupEditBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="pickup-edit-content" id="pickupEditContent">
                <!-- Pickup edit form will be loaded here by JavaScript -->
            </div>
            <div class="pickup-edit-actions">
                <button class="pickup-edit-action-btn cancel" id="cancelPickupEditBtn">Cancel</button>
                <button class="pickup-edit-action-btn save" id="savePickupEditBtn">Save Changes</button>
            </div>
        </div>
    </div>
    
    <!-- Edit Page (Hidden by default) -->
    <div class="edit-page" id="editPage">
        <div class="edit-container">
            <div class="edit-header">
                <div class="edit-title" id="editPageTitle">Edit Selected Items</div>
                <button class="close-edit" id="closeEditBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="edit-content" id="editContent">
                <!-- Edit form will be loaded here by JavaScript -->
            </div>
            <div class="edit-actions">
                <button class="edit-action-btn cancel" id="cancelEditBtn">Cancel</button>
                <button class="edit-action-btn save" id="saveEditBtn">Save Changes</button>
            </div>
        </div>
    </div>
    
    <!-- Order Edit Modal -->
    <div class="edit-page" id="orderEditModal">
        <div class="edit-container">
            <div class="edit-header">
                <div class="edit-title" id="orderEditTitle">Edit Order</div>
                <button class="close-edit" id="closeOrderEditBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="edit-content" id="orderEditContent">
                <!-- Order edit form will be loaded here by JavaScript -->
            </div>
            <div class="edit-actions">
                <button class="edit-action-btn cancel" id="cancelOrderEditBtn">Cancel</button>
                <button class="edit-action-btn save" id="saveOrderEditBtn">Save Changes</button>
            </div>
        </div>
    </div>
    
    <div class="notification" id="notification"></div>

    <script>
        // Fixed data - won't change on refresh
        const statsData = [
            { 
                id: 'new', 
                title: 'New Return', 
                count: 12, 
                icon: 'fas fa-plus-circle', 
                color: '#3b82f6',
                change: 0,
                changeType: 'positive',
                description: 'New returns awaiting confirmation'
            },
            { 
                id: 'confirmed', 
                title: 'Confirmed Return', 
                count: 8, 
                icon: 'fas fa-check-circle', 
                color: '#10b981',
                change: 2,
                changeType: 'positive',
                description: 'Returns confirmed and in processing queue'
            },
            { 
                id: 'ready', 
                title: 'Ready To Ship', 
                count: 15, 
                icon: 'fas fa-shipping-fast', 
                color: '#f59e0b',
                change: 5,
                changeType: 'positive',
                description: 'Returns ready for pickup/shipping'
            },
            { 
                id: 'pickups', 
                title: 'Pickups', 
                count: 6, 
                icon: 'fas fa-truck-pickup', 
                color: '#8b5cf6',
                change: 1,
                changeType: 'positive',
                description: 'Returns scheduled for pickup'
            },
            { 
                id: 'transit', 
                title: 'In Transit', 
                count: 22, 
                icon: 'fas fa-truck', 
                color: '#0ea5e9',
                change: 3,
                changeType: 'positive',
                description: 'Returns currently in transit'
            },
            { 
                id: 'exceptions', 
                title: 'Exceptions', 
                count: 5, 
                icon: 'fas fa-exclamation-triangle', 
                color: '#ef4444',
                change: 2,
                changeType: 'negative',
                description: 'Returns with issues requiring attention'
            },
            { 
                id: 'returned', 
                title: 'Returned', 
                count: 48, 
                icon: 'fas fa-undo', 
                color: '#10b981',
                change: 8,
                changeType: 'positive',
                description: 'Returns received and processed'
            },
            { 
                id: 'held', 
                title: 'Held', 
                count: 3, 
                icon: 'fas fa-pause-circle', 
                color: '#6b7280',
                change: 0,
                changeType: 'positive',
                description: 'Returns on hold pending review'
            },
            { 
                id: 'cancelled', 
                title: 'Cancelled', 
                count: 7, 
                icon: 'fas fa-times-circle', 
                color: '#6b7280',
                change: 1,
                changeType: 'negative',
                description: 'Returns cancelled by customer'
            },
            { 
                id: 'all', 
                title: 'All Orders', 
                count: 126, 
                icon: 'fas fa-clipboard-list', 
                color: '#1f2937',
                change: 0,
                changeType: 'positive',
                description: 'All return orders across all statuses'
            }
        ];

        // Pickups data - EXACTLY LIKE IN YOUR IMAGE
        const pickupsData = [
            {
                manifestDate: '2023-10-15',
                manifestId: 'MAN-2023-1001',
                numberOfOrders: 5,
                pickupAddress: '123 Main St, New York, NY 10001',
                shipperName: 'FedEx Ground',
                status: 'Scheduled'
            },
            {
                manifestDate: '2023-10-14',
                manifestId: 'MAN-2023-1002',
                numberOfOrders: 3,
                pickupAddress: '456 Oak Ave, Los Angeles, CA 90001',
                shipperName: 'UPS',
                status: 'Pending'
            },
            {
                manifestDate: '2023-10-13',
                manifestId: 'MAN-2023-1003',
                numberOfOrders: 8,
                pickupAddress: '789 Pine Rd, Chicago, IL 60601',
                shipperName: 'DHL Express',
                status: 'In Progress'
            },
            {
                manifestDate: '2023-10-12',
                manifestId: 'MAN-2023-1004',
                numberOfOrders: 2,
                pickupAddress: '321 Elm Blvd, Houston, TX 77001',
                shipperName: 'USPS',
                status: 'Completed'
            },
            {
                manifestDate: '2023-10-11',
                manifestId: 'MAN-2023-1005',
                numberOfOrders: 4,
                pickupAddress: '654 Maple Dr, Phoenix, AZ 85001',
                shipperName: 'Amazon Logistics',
                status: 'Scheduled'
            },
            {
                manifestDate: '2023-10-10',
                manifestId: 'MAN-2023-1006',
                numberOfOrders: 6,
                pickupAddress: '987 Cedar Ln, Philadelphia, PA 19101',
                shipperName: 'OnTrac',
                status: 'Cancelled'
            }
        ];

        // Fixed order data - won't change on refresh
        const ordersData = {
            new: [
                { id: 'RTN-2023-1001', channel: 'Amazon', product: 'Wireless Headphones Pro', payment: 'Refund', customer: 'John Smith', address: 'New York, NY', fulfillment: 'FBA', status: 'New Return', date: '2023-10-15' },
                { id: 'RTN-2023-1002', channel: 'Shopify', product: 'Smart Watch Series 5', payment: 'Exchange', customer: 'Emma Johnson', address: 'Los Angeles, CA', fulfillment: '3PL', status: 'New Return', date: '2023-10-14' },
                { id: 'RTN-2023-1003', channel: 'eBay', product: 'Premium Laptop Backpack', payment: 'Store Credit', customer: 'Michael Brown', address: 'Chicago, IL', fulfillment: 'Seller', status: 'New Return', date: '2023-10-14' },
                { id: 'RTN-2023-1004', channel: 'Walmart', product: 'Bluetooth Speaker X2', payment: 'Refund', customer: 'Sarah Davis', address: 'Houston, TX', fulfillment: 'WFS', status: 'New Return', date: '2023-10-13' }
            ],
            confirmed: [
                { id: 'RTN-2023-2001', channel: 'Amazon', product: 'Fitness Tracker Pro', payment: 'Exchange', customer: 'Robert Wilson', address: 'Phoenix, AZ', fulfillment: 'FBA', status: 'Confirmed Return', date: '2023-10-12' },
                { id: 'RTN-2023-2002', channel: 'Shopify', product: 'Phone Charger Fast', payment: 'Refund', customer: 'David Miller', address: 'San Antonio, TX', fulfillment: '3PL', status: 'Confirmed Return', date: '2023-10-11' },
                { id: 'RTN-2023-2003', channel: 'eBay', product: 'Coffee Maker Deluxe', payment: 'Store Credit', customer: 'James Wilson', address: 'San Diego, CA', fulfillment: 'Seller', status: 'Confirmed Return', date: '2023-10-10' }
            ],
            ready: [
                { id: 'RTN-2023-3001', channel: 'Walmart', product: 'Desk Lamp LED', payment: 'Exchange', customer: 'Maria Garcia', address: 'Dallas, TX', fulfillment: 'WFS', status: 'Ready To Ship', date: '2023-10-09' },
                { id: 'RTN-2023-3002', channel: 'Amazon', product: 'Gaming Mouse Pro', payment: 'Refund', customer: 'Thomas Clark', address: 'San Jose, CA', fulfillment: 'FBA', status: 'Ready To Ship', date: '2023-10-09' },
                { id: 'RTN-2023-3003', channel: 'Shopify', product: 'Water Bottle 1L', payment: 'Store Credit', customer: 'Jennifer Lee', address: 'Austin, TX', fulfillment: '3PL', status: 'Ready To Ship', date: '2023-10-08' },
                { id: 'RTN-2023-3004', channel: 'eBay', product: 'Keyboard Mechanical', payment: 'Refund', customer: 'Daniel Moore', address: 'Jacksonville, FL', fulfillment: 'Seller', status: 'Ready To Ship', date: '2023-10-08' }
            ],
            transit: [
                { id: 'RTN-2023-5001', channel: 'eBay', product: 'Coffee Maker Pro', payment: 'Refund', customer: 'James Wilson', address: 'San Diego, CA', fulfillment: 'Seller', status: 'In Transit', date: '2023-10-06' },
                { id: 'RTN-2023-5002', channel: 'Walmart', product: 'Desk Lamp Smart', payment: 'Exchange', customer: 'Maria Garcia', address: 'Dallas, TX', fulfillment: 'WFS', status: 'In Transit', date: '2023-10-05' },
                { id: 'RTN-2023-5003', channel: 'Amazon', product: 'Gaming Mouse RGB', payment: 'Refund', customer: 'Thomas Clark', address: 'San Jose, CA', fulfillment: 'FBA', status: 'In Transit', date: '2023-10-05' }
            ],
            exceptions: [
                { id: 'RTN-2023-6001', channel: 'Walmart', product: 'Desk Lamp Advanced', payment: 'Exchange', customer: 'Maria Garcia', address: 'Dallas, TX', fulfillment: 'WFS', status: 'Exceptions', date: '2023-10-04' },
                { id: 'RTN-2023-6002', channel: 'Amazon', product: 'Gaming Mouse Wireless', payment: 'Refund', customer: 'Thomas Clark', address: 'San Jose, CA', fulfillment: 'FBA', status: 'Exceptions', date: '2023-10-03' }
            ],
            returned: [
                { id: 'RTN-2023-7001', channel: 'Shopify', product: 'Water Bottle 750ml', payment: 'Store Credit', customer: 'Jennifer Lee', address: 'Austin, TX', fulfillment: '3PL', status: 'Returned', date: '2023-10-02' },
                { id: 'RTN-2023-7002', channel: 'Amazon', product: 'Keyboard Wireless', payment: 'Refund', customer: 'Daniel Moore', address: 'Jacksonville, FL', fulfillment: 'FBA', status: 'Returned', date: '2023-10-01' },
                { id: 'RTN-2023-7003', channel: 'eBay', product: 'Monitor Stand Adjustable', payment: 'Exchange', customer: 'Susan Lewis', address: 'San Francisco, CA', fulfillment: 'Seller', status: 'Returned', date: '2023-09-30' }
            ],
            held: [
                { id: 'RTN-2023-8001', channel: 'eBay', product: 'Monitor Stand Premium', payment: 'Exchange', customer: 'Susan Lewis', address: 'San Francisco, CA', fulfillment: 'Seller', status: 'Held', date: '2023-09-29' }
            ],
            cancelled: [
                { id: 'RTN-2023-9001', channel: 'Walmart', product: 'Webcam HD', payment: 'Refund', customer: 'Charles Walker', address: 'Columbus, OH', fulfillment: 'WFS', status: 'Cancelled', date: '2023-09-28' },
                { id: 'RTN-2023-9002', channel: 'Amazon', product: 'External SSD 1TB', payment: 'Refund', customer: 'Robert Johnson', address: 'Seattle, WA', fulfillment: 'FBA', status: 'Cancelled', date: '2023-09-27' }
            ],
            all: []
        };

        // Initialize all orders (combine all categories)
        function initializeAllOrders() {
            ordersData.all = [];
            // Add orders from all categories except 'all' itself
            Object.keys(ordersData).forEach(key => {
                if (key !== 'all') {
                    ordersData.all = ordersData.all.concat(ordersData[key]);
                }
            });
        }

        // Current state
        let selectedStatId = 'all';
        let selectedOrders = new Set(); // For bulk actions
        let selectedPickups = new Set(); // For pickups selection
        let currentSearchTerm = '';
        let currentEditingOrder = null; // Track which order is being edited
        let currentEditingPickup = null; // Track which pickup is being edited
        let bulkActionsMenuVisible = false; // Track bulk actions menu visibility

        // Initialize dashboard
        function initDashboard() {
            initializeAllOrders();
            renderStats();
            renderContent();
            setupEventListeners();
            setupBulkActionsMenu();
        }

        // Setup bulk actions menu event listeners
        function setupBulkActionsMenu() {
            const bulkActionsMenu = document.getElementById('bulkActionsMenu');
            
            // Close menu when clicking outside
            document.addEventListener('click', function(e) {
                if (bulkActionsMenuVisible && !e.target.closest('#bulkActionsMenu') && !e.target.closest('.bulk-actions-dropdown-btn')) {
                    bulkActionsMenu.classList.remove('active');
                    bulkActionsMenuVisible = false;
                }
            });
            
            // Handle menu item clicks
            bulkActionsMenu.addEventListener('click', function(e) {
                const menuItem = e.target.closest('.bulk-menu-item');
                if (!menuItem) return;
                
                const action = menuItem.dataset.action;
                handleBulkAction(action);
                
                // Close menu after selection
                bulkActionsMenu.classList.remove('active');
                bulkActionsMenuVisible = false;
            });
            
            // Close on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && bulkActionsMenuVisible) {
                    bulkActionsMenu.classList.remove('active');
                    bulkActionsMenuVisible = false;
                }
            });
        }

        // Handle bulk action from menu
        function handleBulkAction(action) {
            let selectedSize = 0;
            let itemType = '';
            let selectedItems = [];
            
            if (selectedStatId === 'pickups') {
                selectedSize = selectedPickups.size;
                itemType = 'pickups';
                selectedItems = Array.from(selectedPickups);
            } else {
                selectedSize = selectedOrders.size;
                itemType = 'orders';
                selectedItems = Array.from(selectedOrders);
            }
            
            if (selectedSize === 0) {
                showNotification(`No ${itemType} selected`, 'error');
                return;
            }
            
            switch(action) {
                case 'process':
                    showNotification(`Processing ${selectedSize} selected ${itemType}`, 'success');
                    // In a real app, you would send an API request here
                    setTimeout(() => {
                        if (selectedStatId === 'pickups') {
                            selectedPickups.clear();
                        } else {
                            selectedOrders.clear();
                        }
                        updateBulkActions();
                        showNotification(`Successfully processed ${selectedSize} ${itemType}`, 'success');
                        renderContent();
                    }, 1500);
                    break;
                    
                case 'edit':
                    // Open edit page
                    openEditPage(selectedItems, itemType);
                    break;
                    
                case 'delete':
                    if (confirm(`Delete ${selectedSize} selected ${itemType}? This action cannot be undone.`)) {
                        showNotification(`Deleting ${selectedSize} ${itemType}...`, 'info');
                        
                        setTimeout(() => {
                            if (selectedStatId === 'pickups') {
                                // Remove selected pickups from data
                                selectedItems.forEach(manifestId => {
                                    const index = pickupsData.findIndex(p => p.manifestId === manifestId);
                                    if (index !== -1) {
                                        pickupsData.splice(index, 1);
                                    }
                                });
                                selectedPickups.clear();
                            } else {
                                // Remove selected orders from data
                                selectedItems.forEach(orderId => {
                                    // Find and remove from all categories
                                    for (const [category, orders] of Object.entries(ordersData)) {
                                        if (category !== 'all') {
                                            const orderIndex = orders.findIndex(order => order.id === orderId);
                                            if (orderIndex !== -1) {
                                                orders.splice(orderIndex, 1);
                                                break;
                                            }
                                        }
                                    }
                                });
                                selectedOrders.clear();
                                initializeAllOrders();
                            }
                            
                            updateBulkActions();
                            renderContent();
                            showNotification(`Successfully deleted ${selectedSize} ${itemType}`, 'success');
                        }, 1500);
                    }
                    break;
                    
                case 'export':
                    showNotification(`Exporting ${selectedSize} selected ${itemType} to CSV`, 'info');
                    // In a real app, you would generate and download a CSV file
                    setTimeout(() => {
                        showNotification(`Exported ${selectedSize} ${itemType} successfully`, 'success');
                    }, 1000);
                    break;
                    
                case 'cancel':
                    if (confirm(`Cancel ${selectedSize} selected ${itemType}? This action cannot be undone.`)) {
                        showNotification(`Cancelling ${selectedSize} ${itemType}...`, 'info');
                        // In a real app, you would send an API request here
                        setTimeout(() => {
                            if (selectedStatId === 'pickups') {
                                selectedPickups.clear();
                            } else {
                                selectedOrders.clear();
                            }
                            updateBulkActions();
                            showNotification(`Successfully cancelled ${selectedSize} ${itemType}`, 'success');
                        }, 1500);
                    }
                    break;
            }
        }

        // Render stats
        function renderStats() {
            const statsContainer = document.getElementById('statsContainer');
            statsContainer.innerHTML = '';
            
            statsData.forEach(stat => {
                const isActive = stat.id === selectedStatId;
                const statElement = document.createElement('div');
                statElement.className = `stat-card ${isActive ? 'active' : ''}`;
                statElement.dataset.statId = stat.id;
                
                statElement.innerHTML = `
                    <div class="stat-header">
                        <div class="stat-title">${stat.title}</div>
                        <div class="stat-icon" style="background-color: ${stat.color}">
                            <i class="${stat.icon}"></i>
                        </div>
                    </div>
                    <div class="stat-count">${stat.count}</div>
                    <div class="stat-change ${stat.changeType}">
                        <i class="fas fa-arrow-${stat.changeType === 'positive' ? 'up' : 'down'}"></i>
                        ${stat.change}%
                    </div>
                `;
                
                statsContainer.appendChild(statElement);
            });
        }

        // Get filtered data based on search term
        function getFilteredData() {
            if (selectedStatId === 'pickups') {
                if (!currentSearchTerm.trim()) {
                    return pickupsData;
                }
                
                const searchTerm = currentSearchTerm.toLowerCase();
                return pickupsData.filter(pickup => 
                    pickup.manifestId.toLowerCase().includes(searchTerm) ||
                    pickup.shipperName.toLowerCase().includes(searchTerm) ||
                    pickup.pickupAddress.toLowerCase().includes(searchTerm) ||
                    pickup.status.toLowerCase().includes(searchTerm) ||
                    pickup.manifestDate.includes(searchTerm) ||
                    pickup.numberOfOrders.toString().includes(searchTerm)
                );
            } else {
                const orders = selectedStatId === 'all' ? ordersData.all : ordersData[selectedStatId] || [];
                
                if (!currentSearchTerm.trim()) {
                    return orders;
                }
                
                const searchTerm = currentSearchTerm.toLowerCase();
                return orders.filter(order => 
                    order.id.toLowerCase().includes(searchTerm) ||
                    order.customer.toLowerCase().includes(searchTerm) ||
                    order.product.toLowerCase().includes(searchTerm) ||
                    order.channel.toLowerCase().includes(searchTerm) ||
                    order.payment.toLowerCase().includes(searchTerm) ||
                    order.address.toLowerCase().includes(searchTerm) ||
                    order.fulfillment.toLowerCase().includes(searchTerm) ||
                    order.status.toLowerCase().includes(searchTerm)
                );
            }
        }

        // Render content area
        function renderContent() {
            const contentArea = document.getElementById('contentArea');
            const selectedStat = statsData.find(stat => stat.id === selectedStatId);
            const filteredData = getFilteredData();
            
            if (selectedStatId === 'pickups') {
                renderPickupsContent(contentArea, selectedStat, filteredData);
            } else {
                renderOrdersContent(contentArea, selectedStat, filteredData);
            }
            
            // Update bulk actions visibility
            updateBulkActions();
            
            // Setup event listeners for newly created elements
            setTimeout(() => {
                setupContentEventListeners();
            }, 10);
        }

        // Render pickups content (EXACTLY LIKE IN IMAGE)
        function renderPickupsContent(container, selectedStat, filteredData) {
            container.innerHTML = `
                <div class="content-header">
                    <div>
                        <div class="content-title">${selectedStat.title}</div>
                        <div class="content-subtitle">${selectedStat.description} • Showing: ${filteredData.length} of ${pickupsData.length} pickups</div>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <div class="action-btn" id="selectAllBtn">
                            <i class="far fa-square"></i> Select All
                        </div>
                        <div class="action-btn" id="deselectAllBtn">
                            <i class="far fa-check-square"></i> Deselect All
                        </div>
                    </div>
                </div>
                
                <div class="bulk-actions" id="bulkActions">
                    <div class="selected-count" id="selectedCount">0 pickups selected</div>
                    <div class="bulk-buttons">
                        <div class="bulk-actions-dropdown">
                            <button class="bulk-actions-dropdown-btn" id="bulkActionsDropdownBtn">
                                <i class="fas fa-ellipsis-h"></i> Bulk Actions
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="search-section">
                    <div class="search-box">
                        <input type="text" class="search-input" id="searchInput" placeholder="Search by manifest ID, shipper name, address..." value="${currentSearchTerm}">
                        <button class="search-btn" id="searchBtn">
                            <i class="fas fa-search"></i> Search
                        </button>
                    </div>
                    <div class="suggestions">
                        <div class="suggestion-tag" data-search="scheduled">Scheduled</div>
                        <div class="suggestion-tag" data-search="fedex">FedEx</div>
                        <div class="suggestion-tag" data-search="today">Today</div>
                        <div class="suggestion-tag" data-search="completed">Completed</div>
                    </div>
                </div>
                
                <div class="pickups-table-section">
                    <div class="pickups-table-container">
                        ${filteredData.length > 0 ? renderPickupsTable(filteredData) : renderNoData('pickups')}
                    </div>
                </div>
                
                <div class="footer-actions">
                    <div class="pagination">
                        <div class="pagination-btn active">1</div>
                        <div class="pagination-btn">2</div>
                        <div class="pagination-btn">3</div>
                        <div class="pagination-btn">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="action-btn" id="refreshBtn">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <button class="action-btn primary" id="exportAllBtn">
                            <i class="fas fa-download"></i> Export All
                        </button>
                        <button class="action-btn" id="addManifestBtn">
                            <i class="fas fa-plus"></i> Add Manifest
                        </button>
                    </div>
                </div>
            `;
        }

        // Render pickups table (EXACTLY LIKE IN IMAGE) - CHANGED View to Edit
        function renderPickupsTable(data) {
            let tableHTML = `
                <table class="pickups-table">
                    <thead>
                        <tr>
                            <th class="checkbox-cell">
                                <input type="checkbox" id="selectAllCheckbox" class="order-checkbox">
                            </th>
                            <th>Manifest Date</th>
                            <th>Manifest ID</th>
                            <th>Number of Orders</th>
                            <th>Pickup Address</th>
                            <th>Shipper Name</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            data.forEach((pickup, index) => {
                const isSelected = selectedPickups.has(pickup.manifestId);
                const statusClass = getPickupStatusClass(pickup.status);
                
                tableHTML += `
                    <tr class="${isSelected ? 'selected' : ''}" data-manifest-id="${pickup.manifestId}">
                        <td class="checkbox-cell">
                            <input type="checkbox" class="order-checkbox" ${isSelected ? 'checked' : ''} data-manifest-id="${pickup.manifestId}">
                        </td>
                        <td>${formatDate(pickup.manifestDate)}</td>
                        <td class="manifest-id">${pickup.manifestId}</td>
                        <td>${pickup.numberOfOrders}</td>
                        <td>${pickup.pickupAddress}</td>
                        <td>${pickup.shipperName}</td>
                        <td><span class="status-badge ${statusClass}">${pickup.status}</span></td>
                        <td>
                            <button class="table-action-btn edit" data-action="edit" data-manifest-id="${pickup.manifestId}">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            tableHTML += `
                    </tbody>
                </table>
            `;
            
            return tableHTML;
        }

        // Render orders content (for other statuses)
        function renderOrdersContent(container, selectedStat, filteredData) {
            container.innerHTML = `
                <div class="content-header">
                    <div>
                        <div class="content-title">${selectedStat.title} Orders</div>
                        <div class="content-subtitle">${selectedStat.description} • Showing: ${filteredData.length} orders</div>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <div class="action-btn" id="selectAllBtn">
                            <i class="far fa-square"></i> Select All
                        </div>
                        <div class="action-btn" id="deselectAllBtn">
                            <i class="far fa-check-square"></i> Deselect All
                        </div>
                    </div>
                </div>
                
                <div class="bulk-actions" id="bulkActions">
                    <div class="selected-count" id="selectedCount">0 orders selected</div>
                    <div class="bulk-buttons">
                        <div class="bulk-actions-dropdown">
                            <button class="bulk-actions-dropdown-btn" id="bulkActionsDropdownBtn">
                                <i class="fas fa-ellipsis-h"></i> Bulk Actions
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="search-section">
                    <div class="search-box">
                        <input type="text" class="search-input" id="searchInput" placeholder="Search by order ID, customer, product..." value="${currentSearchTerm}">
                        <button class="search-btn" id="searchBtn">
                            <i class="fas fa-search"></i> Search
                        </button>
                    </div>
                    <div class="suggestions">
                        <div class="suggestion-tag" data-search="RTN">Order ID RTN</div>
                        <div class="suggestion-tag" data-search="Amazon">Amazon</div>
                        <div class="suggestion-tag" data-search="Refund">Refund</div>
                        <div class="suggestion-tag" data-search="New">New Return</div>
                    </div>
                </div>
                
                <div class="table-section">
                    ${filteredData.length > 0 ? renderOrdersTable(filteredData) : renderNoData('orders')}
                </div>
                
                <div class="footer-actions">
                    <div class="pagination">
                        <div class="pagination-btn active">1</div>
                        <div class="pagination-btn">2</div>
                        <div class="pagination-btn">3</div>
                        <div class="pagination-btn">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="action-btn" id="refreshBtn">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <button class="action-btn primary" id="exportAllBtn">
                            <i class="fas fa-download"></i> Export All
                        </button>
                        <button class="action-btn" id="printBtn">
                            <i class="fas fa-print"></i> Print
                        </button>
                    </div>
                </div>
            `;
        }

        // Render orders table with action buttons
        function renderOrdersTable(data) {
            let tableHTML = `
                <table>
                    <thead>
                        <tr>
                            <th class="checkbox-cell">
                                <input type="checkbox" id="selectAllCheckbox" class="order-checkbox">
                            </th>
                            <th>Order ID</th>
                            <th>Channel</th>
                            <th>Product Details</th>
                            <th>Payment</th>
                            <th>Customer Details</th>
                            <th>Address</th>
                            <th>Fulfillment</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            data.forEach((order, index) => {
                const isSelected = selectedOrders.has(order.id);
                const statusClass = getStatusClass(order.status);
                tableHTML += `
                    <tr class="${isSelected ? 'selected' : ''}" data-order-id="${order.id}">
                        <td class="checkbox-cell">
                            <input type="checkbox" class="order-checkbox" ${isSelected ? 'checked' : ''} data-order-id="${order.id}">
                        </td>
                        <td class="order-id">${order.id}</td>
                        <td>${order.channel}</td>
                        <td>${order.product}</td>
                        <td>${order.payment}</td>
                        <td>${order.customer}</td>
                        <td>${order.address}</td>
                        <td>${order.fulfillment}</td>
                        <td><span class="status-badge ${statusClass}">${order.status}</span></td>
                        <td>
                            <div class="table-actions">
                                <button class="table-action-btn view" data-action="view" data-order-id="${order.id}">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="table-action-btn edit" data-action="edit" data-order-id="${order.id}">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="table-action-btn delete" data-action="delete" data-order-id="${order.id}">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            });
            
            tableHTML += `
                    </tbody>
                </table>
            `;
            
            return tableHTML;
        }

        // Render no data message
        function renderNoData(type) {
            return `
                <div class="no-data">
                    <i class="fas fa-clipboard-list"></i>
                    <p>No ${type === 'pickups' ? 'pickup manifests' : 'orders'} found.</p>
                    ${currentSearchTerm ? `<p style="margin-top: 10px; font-size: 14px;">No results for "${currentSearchTerm}"</p>` : ''}
                </div>
            `;
        }

        // Get CSS class for pickup status
        function getPickupStatusClass(status) {
            const statusMap = {
                'Scheduled': 'status-pickup',
                'Pending': 'status-ready',
                'In Progress': 'status-transit',
                'Completed': 'status-returned',
                'Cancelled': 'status-cancelled'
            };
            
            return statusMap[status] || 'status-ready';
        }

        // Get CSS class for order status
        function getStatusClass(status) {
            const statusMap = {
                'New Return': 'status-new',
                'Confirmed Return': 'status-confirmed',
                'Ready To Ship': 'status-ready',
                'Pickups': 'status-pickup',
                'In Transit': 'status-transit',
                'Exceptions': 'status-exception',
                'Returned': 'status-returned',
                'Held': 'status-held',
                'Cancelled': 'status-cancelled'
            };
            
            return statusMap[status] || 'status-new';
        }

        // Format date
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
        }

        // Update bulk actions visibility and count
        function updateBulkActions() {
            const bulkActions = document.getElementById('bulkActions');
            const selectedCount = document.getElementById('selectedCount');
            
            let selectedSize = 0;
            let itemType = '';
            
            if (selectedStatId === 'pickups') {
                selectedSize = selectedPickups.size;
                itemType = 'pickups';
            } else {
                selectedSize = selectedOrders.size;
                itemType = 'orders';
            }
            
            if (selectedSize > 0) {
                bulkActions.classList.add('active');
                selectedCount.textContent = `${selectedSize} ${itemType} selected`;
            } else {
                bulkActions.classList.remove('active');
            }
            
            // Update select all checkbox
            const selectAllCheckbox = document.getElementById('selectAllCheckbox');
            if (selectAllCheckbox) {
                const filteredData = getFilteredData();
                if (selectedStatId === 'pickups') {
                    const allSelected = filteredData.length > 0 && filteredData.every(pickup => selectedPickups.has(pickup.manifestId));
                    selectAllCheckbox.checked = allSelected;
                    selectAllCheckbox.indeterminate = !allSelected && selectedPickups.size > 0;
                } else {
                    const allSelected = filteredData.length > 0 && filteredData.every(order => selectedOrders.has(order.id));
                    selectAllCheckbox.checked = allSelected;
                    selectAllCheckbox.indeterminate = !allSelected && selectedOrders.size > 0;
                }
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            // Stats click events
            document.addEventListener('click', function(e) {
                if (e.target.closest('.stat-card')) {
                    const statItem = e.target.closest('.stat-card');
                    const statId = statItem.dataset.statId;
                    
                    // Update selected stat
                    selectedStatId = statId;
                    
                    // Clear selected orders when switching categories
                    selectedOrders.clear();
                    selectedPickups.clear();
                    
                    // Re-render stats and content
                    renderStats();
                    renderContent();
                    
                    // Show notification
                    showNotification(`Now viewing: ${statsData.find(stat => stat.id === statId).title}`, 'info');
                }
            });
        }

        // Setup content event listeners
        function setupContentEventListeners() {
            // Search button
            const searchBtn = document.getElementById('searchBtn');
            if (searchBtn) {
                searchBtn.addEventListener('click', performSearch);
            }
            
            // Search input enter key
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        performSearch();
                    }
                });
                
                // Clear search on escape
                searchInput.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape') {
                        this.value = '';
                        currentSearchTerm = '';
                        renderContent();
                        showNotification('Search cleared', 'info');
                    }
                });
            }
            
            // Suggestion tags
            document.querySelectorAll('.suggestion-tag').forEach(tag => {
                tag.addEventListener('click', function() {
                    const searchType = this.dataset.search;
                    const searchInput = document.getElementById('searchInput');
                    
                    searchInput.value = searchType;
                    currentSearchTerm = searchType;
                    renderContent();
                    showNotification(`Searching for: ${searchType}`, 'info');
                });
            });
            
            // Select All checkbox in table header
            const selectAllCheckbox = document.getElementById('selectAllCheckbox');
            if (selectAllCheckbox) {
                selectAllCheckbox.addEventListener('change', function() {
                    const filteredData = getFilteredData();
                    
                    if (selectedStatId === 'pickups') {
                        if (this.checked) {
                            // Add all filtered pickups to selection
                            filteredData.forEach(pickup => selectedPickups.add(pickup.manifestId));
                        } else {
                            // Remove all filtered pickups from selection
                            filteredData.forEach(pickup => selectedPickups.delete(pickup.manifestId));
                        }
                    } else {
                        if (this.checked) {
                            // Add all filtered orders to selection
                            filteredData.forEach(order => selectedOrders.add(order.id));
                        } else {
                            // Remove all filtered orders from selection
                            filteredData.forEach(order => selectedOrders.delete(order.id));
                        }
                    }
                    
                    updateBulkActions();
                    renderContent();
                    
                    const itemType = selectedStatId === 'pickups' ? 'pickups' : 'orders';
                    const action = this.checked ? 'Selected' : 'Deselected';
                    showNotification(`${action} ${filteredData.length} ${itemType}`, 'success');
                });
            }
            
            // Order/Manifest checkboxes
            document.addEventListener('change', function(e) {
                if (e.target.classList.contains('order-checkbox') && e.target.id !== 'selectAllCheckbox') {
                    if (selectedStatId === 'pickups') {
                        const manifestId = e.target.dataset.manifestId;
                        if (manifestId) {
                            // Individual manifest checkbox
                            if (e.target.checked) {
                                selectedPickups.add(manifestId);
                            } else {
                                selectedPickups.delete(manifestId);
                            }
                        }
                    } else {
                        const orderId = e.target.dataset.orderId;
                        if (orderId) {
                            // Individual order checkbox
                            if (e.target.checked) {
                                selectedOrders.add(orderId);
                            } else {
                                selectedOrders.delete(orderId);
                            }
                        }
                    }
                    
                    updateBulkActions();
                }
            });
            
            // Select all button
            const selectAllBtn = document.getElementById('selectAllBtn');
            if (selectAllBtn) {
                selectAllBtn.addEventListener('click', function() {
                    const filteredData = getFilteredData();
                    if (selectedStatId === 'pickups') {
                        filteredData.forEach(pickup => selectedPickups.add(pickup.manifestId));
                        showNotification(`Selected ${filteredData.length} pickups`, 'success');
                    } else {
                        filteredData.forEach(order => selectedOrders.add(order.id));
                        showNotification(`Selected ${filteredData.length} orders`, 'success');
                    }
                    updateBulkActions();
                    renderContent();
                });
            }
            
            // Deselect all button
            const deselectAllBtn = document.getElementById('deselectAllBtn');
            if (deselectAllBtn) {
                deselectAllBtn.addEventListener('click', function() {
                    if (selectedStatId === 'pickups') {
                        const filteredData = getFilteredData();
                        filteredData.forEach(pickup => selectedPickups.delete(pickup.manifestId));
                    } else {
                        const filteredData = getFilteredData();
                        filteredData.forEach(order => selectedOrders.delete(order.id));
                    }
                    updateBulkActions();
                    renderContent();
                    showNotification('Cleared all selections', 'info');
                });
            }
            
            // Bulk actions dropdown button
            const bulkActionsDropdownBtn = document.getElementById('bulkActionsDropdownBtn');
            if (bulkActionsDropdownBtn) {
                bulkActionsDropdownBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const bulkActionsMenu = document.getElementById('bulkActionsMenu');
                    
                    // Toggle menu visibility
                    if (bulkActionsMenuVisible) {
                        bulkActionsMenu.classList.remove('active');
                        bulkActionsMenuVisible = false;
                    } else {
                        // Position menu near the button
                        const rect = this.getBoundingClientRect();
                        bulkActionsMenu.style.top = `${rect.bottom + 5}px`;
                        bulkActionsMenu.style.left = `${rect.left}px`;
                        
                        bulkActionsMenu.classList.add('active');
                        bulkActionsMenuVisible = true;
                    }
                });
            }
            
            // Footer action buttons
            const refreshBtn = document.getElementById('refreshBtn');
            if (refreshBtn) {
                refreshBtn.addEventListener('click', function() {
                    // Just re-render content without changing data
                    this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Refreshing...';
                    this.disabled = true;
                    
                    setTimeout(() => {
                        this.innerHTML = '<i class="fas fa-sync-alt"></i> Refresh';
                        this.disabled = false;
                        renderContent();
                        showNotification('Data refreshed', 'success');
                    }, 800);
                });
            }
            
            const exportAllBtn = document.getElementById('exportAllBtn');
            if (exportAllBtn) {
                exportAllBtn.addEventListener('click', function() {
                    const filteredData = getFilteredData();
                    showNotification(`Exporting ${filteredData.length} items to CSV`, 'info');
                    setTimeout(() => {
                        showNotification('Export completed successfully', 'success');
                    }, 1000);
                });
            }
            
            const addManifestBtn = document.getElementById('addManifestBtn');
            if (addManifestBtn) {
                addManifestBtn.addEventListener('click', function() {
                    showNotification('Opening new manifest form...', 'info');
                });
            }
            
            const printBtn = document.getElementById('printBtn');
            if (printBtn) {
                printBtn.addEventListener('click', function() {
                    showNotification('Preparing print layout...', 'info');
                    setTimeout(() => {
                        window.print();
                    }, 500);
                });
            }
            
            // Action buttons in table - EDIT and DELETE
            document.addEventListener('click', function(e) {
                if (e.target.closest('.table-action-btn')) {
                    const actionBtn = e.target.closest('.table-action-btn');
                    const action = actionBtn.dataset.action;
                    
                    if (selectedStatId === 'pickups') {
                        const manifestId = actionBtn.dataset.manifestId;
                        if (manifestId) {
                            if (action === 'edit') {
                                editSinglePickup(manifestId);
                            }
                        }
                    } else {
                        const orderId = actionBtn.dataset.orderId;
                        if (orderId) {
                            if (action === 'view') {
                                showNotification(`Viewing details for order: ${orderId}`, 'info');
                            } else if (action === 'edit') {
                                editSingleOrder(orderId);
                            } else if (action === 'delete') {
                                deleteSingleOrder(orderId);
                            }
                        }
                    }
                }
                
                // Order ID click
                if (e.target.classList.contains('order-id')) {
                    const orderId = e.target.textContent;
                    showNotification(`Viewing details for order: ${orderId}`, 'info');
                }
                
                // Manifest ID click
                if (e.target.classList.contains('manifest-id')) {
                    const manifestId = e.target.textContent;
                    showNotification(`Viewing details for manifest: ${manifestId}`, 'info');
                }
            });
        }

        // Perform search
        function performSearch() {
            const searchInput = document.getElementById('searchInput');
            const searchTerm = searchInput.value.trim();
            
            currentSearchTerm = searchTerm;
            renderContent();
            
            const filteredData = getFilteredData();
            if (searchTerm) {
                showNotification(`Found ${filteredData.length} item(s) matching "${searchTerm}"`, 'info');
            } else {
                showNotification('Showing all items', 'info');
            }
        }

        // Edit single pickup
        function editSinglePickup(manifestId) {
            // Find the pickup in the data
            const pickupToEdit = pickupsData.find(pickup => pickup.manifestId === manifestId);
            
            if (!pickupToEdit) {
                showNotification('Pickup manifest not found', 'error');
                return;
            }
            
            currentEditingPickup = pickupToEdit;
            
            // Open pickup edit modal
            const pickupEditModal = document.getElementById('pickupEditModal');
            const pickupEditTitle = document.getElementById('pickupEditTitle');
            const pickupEditContent = document.getElementById('pickupEditContent');
            
            pickupEditTitle.textContent = `Edit Pickup Manifest: ${manifestId}`;
            
            // Generate edit form for single pickup
            pickupEditContent.innerHTML = `
                <div class="pickup-edit-item">
                    <div class="pickup-edit-item-title">Pickup Information</div>
                    <div style="background-color: #f9fafb; padding: 15px; border-radius: 6px; margin-bottom: 20px;">
                        <p style="margin-bottom: 10px; font-weight: 500;">Editing pickup manifest:</p>
                        <p style="color: #4f46e5; font-weight: 600;">${manifestId}</p>
                        <p style="margin-top: 10px; color: #6b7280; font-size: 14px;">Number of Orders: ${pickupToEdit.numberOfOrders} • Shipper: ${pickupToEdit.shipperName}</p>
                    </div>
                </div>
                
                <div class="pickup-edit-item">
                    <div class="pickup-edit-item-title">Update Pickup Details</div>
                    <div class="pickup-edit-form">
                        <div class="form-group">
                            <label for="pickupEditDate">Manifest Date</label>
                            <input type="date" id="pickupEditDate" value="${pickupToEdit.manifestDate}">
                        </div>
                        
                        <div class="form-group">
                            <label for="pickupEditStatus">Status</label>
                            <select id="pickupEditStatus">
                                <option value="Scheduled" ${pickupToEdit.status === 'Scheduled' ? 'selected' : ''}>Scheduled</option>
                                <option value="Pending" ${pickupToEdit.status === 'Pending' ? 'selected' : ''}>Pending</option>
                                <option value="In Progress" ${pickupToEdit.status === 'In Progress' ? 'selected' : ''}>In Progress</option>
                                <option value="Completed" ${pickupToEdit.status === 'Completed' ? 'selected' : ''}>Completed</option>
                                <option value="Cancelled" ${pickupToEdit.status === 'Cancelled' ? 'selected' : ''}>Cancelled</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="pickupEditOrders">Number of Orders</label>
                            <input type="number" id="pickupEditOrders" value="${pickupToEdit.numberOfOrders}" min="1" max="100">
                        </div>
                        
                        <div class="form-group">
                            <label for="pickupEditShipper">Shipper Name</label>
                            <select id="pickupEditShipper">
                                <option value="FedEx Ground" ${pickupToEdit.shipperName === 'FedEx Ground' ? 'selected' : ''}>FedEx Ground</option>
                                <option value="UPS" ${pickupToEdit.shipperName === 'UPS' ? 'selected' : ''}>UPS</option>
                                <option value="DHL Express" ${pickupToEdit.shipperName === 'DHL Express' ? 'selected' : ''}>DHL Express</option>
                                <option value="USPS" ${pickupToEdit.shipperName === 'USPS' ? 'selected' : ''}>USPS</option>
                                <option value="Amazon Logistics" ${pickupToEdit.shipperName === 'Amazon Logistics' ? 'selected' : ''}>Amazon Logistics</option>
                                <option value="OnTrac" ${pickupToEdit.shipperName === 'OnTrac' ? 'selected' : ''}>OnTrac</option>
                            </select>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="pickupEditAddress">Pickup Address</label>
                            <textarea id="pickupEditAddress" rows="3">${pickupToEdit.pickupAddress}</textarea>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="pickupEditNotes">Update Notes</label>
                            <textarea id="pickupEditNotes" rows="3" placeholder="Add notes about this update..."></textarea>
                        </div>
                    </div>
                </div>
                
                <div class="pickup-edit-item">
                    <div class="pickup-edit-item-title">Preview Changes</div>
                    <div style="background-color: #f0f9ff; padding: 15px; border-radius: 6px;">
                        <p style="margin-bottom: 10px; font-weight: 500;">This will update the pickup manifest:</p>
                        <ul style="padding-left: 20px; color: #0369a1;">
                            <li>Status: ${pickupToEdit.status} → <span id="pickupStatusPreview">${pickupToEdit.status}</span></li>
                            <li>Number of Orders: ${pickupToEdit.numberOfOrders} → <span id="pickupOrdersPreview">${pickupToEdit.numberOfOrders}</span></li>
                            <li>Shipper: ${pickupToEdit.shipperName} → <span id="pickupShipperPreview">${pickupToEdit.shipperName}</span></li>
                            <li>Add update notes to pickup record</li>
                        </ul>
                    </div>
                </div>
            `;
            
            pickupEditModal.classList.add('active');
            
            // Setup live preview updates
            setTimeout(() => {
                setupPickupEditModalEventListeners(manifestId);
            }, 10);
        }

        // Setup pickup edit modal event listeners
        function setupPickupEditModalEventListeners(manifestId) {
            const pickupEditModal = document.getElementById('pickupEditModal');
            const closePickupEditBtn = document.getElementById('closePickupEditBtn');
            const cancelPickupEditBtn = document.getElementById('cancelPickupEditBtn');
            const savePickupEditBtn = document.getElementById('savePickupEditBtn');
            
            // Close pickup edit modal
            closePickupEditBtn.addEventListener('click', function() {
                pickupEditModal.classList.remove('active');
                currentEditingPickup = null;
            });
            
            // Cancel pickup edit
            cancelPickupEditBtn.addEventListener('click', function() {
                pickupEditModal.classList.remove('active');
                currentEditingPickup = null;
                showNotification('Edit cancelled', 'info');
            });
            
            // Save pickup edit
            savePickupEditBtn.addEventListener('click', function() {
                // Get form values
                const newDate = document.getElementById('pickupEditDate').value;
                const newStatus = document.getElementById('pickupEditStatus').value;
                const newOrders = document.getElementById('pickupEditOrders').value;
                const newShipper = document.getElementById('pickupEditShipper').value;
                const newAddress = document.getElementById('pickupEditAddress').value;
                const notes = document.getElementById('pickupEditNotes').value;
                
                // Show saving notification
                const originalText = savePickupEditBtn.innerHTML;
                savePickupEditBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
                savePickupEditBtn.disabled = true;
                
                // Simulate save process
                setTimeout(() => {
                    // Find and update the pickup in the data
                    const pickupIndex = pickupsData.findIndex(pickup => pickup.manifestId === manifestId);
                    
                    if (pickupIndex !== -1) {
                        // Update the pickup
                        pickupsData[pickupIndex] = {
                            ...pickupsData[pickupIndex],
                            manifestDate: newDate,
                            status: newStatus,
                            numberOfOrders: parseInt(newOrders),
                            shipperName: newShipper,
                            pickupAddress: newAddress
                        };
                    }
                    
                    // Restore button
                    savePickupEditBtn.innerHTML = originalText;
                    savePickupEditBtn.disabled = false;
                    
                    // Close modal
                    pickupEditModal.classList.remove('active');
                    currentEditingPickup = null;
                    
                    // Show success notification
                    showNotification(`Successfully updated pickup manifest: ${manifestId}`, 'success');
                    
                    // Refresh the content
                    renderContent();
                }, 1500);
            });
            
            // Live preview updates
            const statusSelect = document.getElementById('pickupEditStatus');
            const ordersInput = document.getElementById('pickupEditOrders');
            const shipperSelect = document.getElementById('pickupEditShipper');
            
            if (statusSelect) {
                statusSelect.addEventListener('change', function() {
                    const statusPreview = document.getElementById('pickupStatusPreview');
                    if (statusPreview) {
                        statusPreview.textContent = this.value;
                    }
                });
            }
            
            if (ordersInput) {
                ordersInput.addEventListener('input', function() {
                    const ordersPreview = document.getElementById('pickupOrdersPreview');
                    if (ordersPreview) {
                        ordersPreview.textContent = this.value;
                    }
                });
            }
            
            if (shipperSelect) {
                shipperSelect.addEventListener('change', function() {
                    const shipperPreview = document.getElementById('pickupShipperPreview');
                    if (shipperPreview) {
                        shipperPreview.textContent = this.value;
                    }
                });
            }
            
            // Close on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && pickupEditModal.classList.contains('active')) {
                    pickupEditModal.classList.remove('active');
                    currentEditingPickup = null;
                    showNotification('Edit cancelled', 'info');
                }
            });
        }

        // Open edit page
        function openEditPage(selectedItems, itemType) {
            const editPage = document.getElementById('editPage');
            const editPageTitle = document.getElementById('editPageTitle');
            const editContent = document.getElementById('editContent');
            
            // Set title based on selection
            editPageTitle.textContent = `Edit ${selectedItems.length} Selected ${itemType.charAt(0).toUpperCase() + itemType.slice(1)}`;
            
            // Generate edit form based on item type
            let editFormHTML = '';
            
            if (itemType === 'pickups') {
                // Get pickup data for selected items
                const selectedPickupsData = pickupsData.filter(pickup => selectedItems.includes(pickup.manifestId));
                
                editFormHTML = `
                    <div class="edit-item">
                        <div class="edit-item-title">Selected Pickups (${selectedItems.length})</div>
                        <div style="background-color: #f9fafb; padding: 15px; border-radius: 6px; margin-bottom: 20px;">
                            <p style="margin-bottom: 10px; font-weight: 500;">Selected Manifest IDs:</p>
                            <p style="color: #4f46e5; font-weight: 600;">${selectedItems.join(', ')}</p>
                        </div>
                    </div>
                    
                    <div class="edit-item">
                        <div class="edit-item-title">Bulk Update Fields</div>
                        <p style="margin-bottom: 20px; color: #6b7280;">Changes will be applied to all selected pickups.</p>
                        <div class="edit-form">
                            <div class="form-group">
                                <label for="editStatus">Status</label>
                                <select id="editStatus" class="full-width">
                                    <option value="">-- No Change --</option>
                                    <option value="Scheduled">Scheduled</option>
                                    <option value="Pending">Pending</option>
                                    <option value="In Progress">In Progress</option>
                                    <option value="Completed">Completed</option>
                                    <option value="Cancelled">Cancelled</option>
                                </select>
                            </div>
                            
                            <div class="form-group full-width">
                                <label for="editShipper">Shipper Name</label>
                                <input type="text" id="editShipper" placeholder="Leave empty for no change">
                            </div>
                            
                            <div class="form-group full-width">
                                <label for="editNotes">Update Notes</label>
                                <textarea id="editNotes" rows="3" placeholder="Add notes about this update..."></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <div class="edit-item">
                        <div class="edit-item-title">Preview Changes</div>
                        <div style="background-color: #f0f9ff; padding: 15px; border-radius: 6px;">
                            <p style="margin-bottom: 10px; font-weight: 500;">This will update:</p>
                            <ul style="padding-left: 20px; color: #0369a1;">
                                <li>Status for ${selectedItems.length} pickups</li>
                                <li>Shipper name (if specified)</li>
                                <li>Add update notes to records</li>
                            </ul>
                        </div>
                    </div>
                `;
            } else {
                // Get order data for selected items
                const allOrders = selectedStatId === 'all' ? ordersData.all : ordersData[selectedStatId] || [];
                const selectedOrdersData = allOrders.filter(order => selectedItems.includes(order.id));
                
                editFormHTML = `
                    <div class="edit-item">
                        <div class="edit-item-title">Selected Orders (${selectedItems.length})</div>
                        <div style="background-color: #f9fafb; padding: 15px; border-radius: 6px; margin-bottom: 20px;">
                            <p style="margin-bottom: 10px; font-weight: 500;">Selected Order IDs:</p>
                            <p style="color: #4f46e5; font-weight: 600;">${selectedItems.join(', ')}</p>
                        </div>
                    </div>
                    
                    <div class="edit-item">
                        <div class="edit-item-title">Bulk Update Fields</div>
                        <p style="margin-bottom: 20px; color: #6b7280;">Changes will be applied to all selected orders.</p>
                        <div class="edit-form">
                            <div class="form-group">
                                <label for="editOrderStatus">Status</label>
                                <select id="editOrderStatus" class="full-width">
                                    <option value="">-- No Change --</option>
                                    <option value="New Return">New Return</option>
                                    <option value="Confirmed Return">Confirmed Return</option>
                                    <option value="Ready To Ship">Ready To Ship</option>
                                    <option value="In Transit">In Transit</option>
                                    <option value="Returned">Returned</option>
                                    <option value="Held">Held</option>
                                    <option value="Cancelled">Cancelled</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="editPayment">Payment Type</label>
                                <select id="editPayment">
                                    <option value="">-- No Change --</option>
                                    <option value="Refund">Refund</option>
                                    <option value="Exchange">Exchange</option>
                                    <option value="Store Credit">Store Credit</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="editFulfillment">Fulfillment</label>
                                <select id="editFulfillment">
                                    <option value="">-- No Change --</option>
                                    <option value="FBA">FBA</option>
                                    <option value="3PL">3PL</option>
                                    <option value="Seller">Seller</option>
                                    <option value="WFS">WFS</option>
                                </select>
                            </div>
                            
                            <div class="form-group full-width">
                                <label for="editOrderNotes">Update Notes</label>
                                <textarea id="editOrderNotes" rows="3" placeholder="Add notes about this update..."></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <div class="edit-item">
                        <div class="edit-item-title">Preview Changes</div>
                        <div style="background-color: #f0f9ff; padding: 15px; border-radius: 6px;">
                            <p style="margin-bottom: 10px; font-weight: 500;">This will update:</p>
                            <ul style="padding-left: 20px; color: #0369a1;">
                                <li>Status for ${selectedItems.length} orders</li>
                                <li>Payment type (if specified)</li>
                                <li>Fulfillment method (if specified)</li>
                                <li>Add update notes to records</li>
                            </ul>
                        </div>
                    </div>
                `;
            }
            
            editContent.innerHTML = editFormHTML;
            editPage.classList.add('active');
            
            // Setup edit page event listeners
            setTimeout(() => {
                setupEditPageEventListeners(selectedItems, itemType);
            }, 10);
        }

        // Setup edit page event listeners
        function setupEditPageEventListeners(selectedItems, itemType) {
            const closeEditBtn = document.getElementById('closeEditBtn');
            const cancelEditBtn = document.getElementById('cancelEditBtn');
            const saveEditBtn = document.getElementById('saveEditBtn');
            const editPage = document.getElementById('editPage');
            
            // Close edit page
            closeEditBtn.addEventListener('click', function() {
                editPage.classList.remove('active');
            });
            
            // Cancel edit
            cancelEditBtn.addEventListener('click', function() {
                editPage.classList.remove('active');
                showNotification('Edit cancelled', 'info');
            });
            
            // Save edit
            saveEditBtn.addEventListener('click', function() {
                // Show saving notification
                const originalText = saveEditBtn.innerHTML;
                saveEditBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
                saveEditBtn.disabled = true;
                
                // Simulate save process
                setTimeout(() => {
                    // Restore button
                    saveEditBtn.innerHTML = originalText;
                    saveEditBtn.disabled = false;
                    
                    // Close edit page
                    editPage.classList.remove('active');
                    
                    // Show success notification
                    showNotification(`Successfully updated ${selectedItems.length} ${itemType}`, 'success');
                    
                    // Clear selections
                    if (itemType === 'pickups') {
                        selectedPickups.clear();
                    } else {
                        selectedOrders.clear();
                    }
                    
                    // Update UI
                    updateBulkActions();
                    renderContent();
                }, 1500);
            });
            
            // Close on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && editPage.classList.contains('active')) {
                    editPage.classList.remove('active');
                    showNotification('Edit cancelled', 'info');
                }
            });
        }

        // Edit single order
        function editSingleOrder(orderId) {
            // Find the order in all categories
            let orderToEdit = null;
            let category = null;
            
            for (const [cat, orders] of Object.entries(ordersData)) {
                if (cat !== 'all') {
                    const foundOrder = orders.find(order => order.id === orderId);
                    if (foundOrder) {
                        orderToEdit = foundOrder;
                        category = cat;
                        break;
                    }
                }
            }
            
            if (!orderToEdit) {
                showNotification('Order not found', 'error');
                return;
            }
            
            currentEditingOrder = orderToEdit;
            
            // Open order edit modal
            const orderEditModal = document.getElementById('orderEditModal');
            const orderEditTitle = document.getElementById('orderEditTitle');
            const orderEditContent = document.getElementById('orderEditContent');
            
            orderEditTitle.textContent = `Edit Order: ${orderId}`;
            
            // Generate edit form for single order
            orderEditContent.innerHTML = `
                <div class="edit-item">
                    <div class="edit-item-title">Order Information</div>
                    <div style="background-color: #f9fafb; padding: 15px; border-radius: 6px; margin-bottom: 20px;">
                        <p style="margin-bottom: 10px; font-weight: 500;">Editing order:</p>
                        <p style="color: #4f46e5; font-weight: 600;">${orderId}</p>
                        <p style="margin-top: 10px; color: #6b7280; font-size: 14px;">Customer: ${orderToEdit.customer} • Product: ${orderToEdit.product}</p>
                    </div>
                </div>
                
                <div class="edit-item">
                    <div class="edit-item-title">Update Order Details</div>
                    <div class="edit-form">
                        <div class="form-group">
                            <label for="singleEditStatus">Status</label>
                            <select id="singleEditStatus">
                                <option value="New Return" ${orderToEdit.status === 'New Return' ? 'selected' : ''}>New Return</option>
                                <option value="Confirmed Return" ${orderToEdit.status === 'Confirmed Return' ? 'selected' : ''}>Confirmed Return</option>
                                <option value="Ready To Ship" ${orderToEdit.status === 'Ready To Ship' ? 'selected' : ''}>Ready To Ship</option>
                                <option value="In Transit" ${orderToEdit.status === 'In Transit' ? 'selected' : ''}>In Transit</option>
                                <option value="Returned" ${orderToEdit.status === 'Returned' ? 'selected' : ''}>Returned</option>
                                <option value="Held" ${orderToEdit.status === 'Held' ? 'selected' : ''}>Held</option>
                                <option value="Cancelled" ${orderToEdit.status === 'Cancelled' ? 'selected' : ''}>Cancelled</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="singleEditChannel">Channel</label>
                            <select id="singleEditChannel">
                                <option value="Amazon" ${orderToEdit.channel === 'Amazon' ? 'selected' : ''}>Amazon</option>
                                <option value="Shopify" ${orderToEdit.channel === 'Shopify' ? 'selected' : ''}>Shopify</option>
                                <option value="eBay" ${orderToEdit.channel === 'eBay' ? 'selected' : ''}>eBay</option>
                                <option value="Walmart" ${orderToEdit.channel === 'Walmart' ? 'selected' : ''}>Walmart</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="singleEditPayment">Payment Type</label>
                            <select id="singleEditPayment">
                                <option value="Refund" ${orderToEdit.payment === 'Refund' ? 'selected' : ''}>Refund</option>
                                <option value="Exchange" ${orderToEdit.payment === 'Exchange' ? 'selected' : ''}>Exchange</option>
                                <option value="Store Credit" ${orderToEdit.payment === 'Store Credit' ? 'selected' : ''}>Store Credit</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="singleEditFulfillment">Fulfillment</label>
                            <select id="singleEditFulfillment">
                                <option value="FBA" ${orderToEdit.fulfillment === 'FBA' ? 'selected' : ''}>FBA</option>
                                <option value="3PL" ${orderToEdit.fulfillment === '3PL' ? 'selected' : ''}>3PL</option>
                                <option value="Seller" ${orderToEdit.fulfillment === 'Seller' ? 'selected' : ''}>Seller</option>
                                <option value="WFS" ${orderToEdit.fulfillment === 'WFS' ? 'selected' : ''}>WFS</option>
                            </select>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="singleEditProduct">Product Details</label>
                            <input type="text" id="singleEditProduct" value="${orderToEdit.product}" placeholder="Product name">
                        </div>
                        
                        <div class="form-group">
                            <label for="singleEditCustomer">Customer Name</label>
                            <input type="text" id="singleEditCustomer" value="${orderToEdit.customer}" placeholder="Customer name">
                        </div>
                        
                        <div class="form-group">
                            <label for="singleEditAddress">Address</label>
                            <input type="text" id="singleEditAddress" value="${orderToEdit.address}" placeholder="Customer address">
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="singleEditNotes">Update Notes</label>
                            <textarea id="singleEditNotes" rows="3" placeholder="Add notes about this update..."></textarea>
                        </div>
                    </div>
                </div>
                
                <div class="edit-item">
                    <div class="edit-item-title">Preview Changes</div>
                    <div style="background-color: #f0f9ff; padding: 15px; border-radius: 6px;">
                        <p style="margin-bottom: 10px; font-weight: 500;">This will update the order:</p>
                        <ul style="padding-left: 20px; color: #0369a1;">
                            <li>Status: ${orderToEdit.status} → <span id="statusPreview">${orderToEdit.status}</span></li>
                            <li>Channel: ${orderToEdit.channel} → <span id="channelPreview">${orderToEdit.channel}</span></li>
                            <li>Payment: ${orderToEdit.payment} → <span id="paymentPreview">${orderToEdit.payment}</span></li>
                            <li>Add update notes to order record</li>
                        </ul>
                    </div>
                </div>
            `;
            
            orderEditModal.classList.add('active');
            
            // Setup live preview updates
            setTimeout(() => {
                setupOrderEditModalEventListeners(orderId, category);
            }, 10);
        }

        // Setup order edit modal event listeners
        function setupOrderEditModalEventListeners(orderId, category) {
            const orderEditModal = document.getElementById('orderEditModal');
            const closeOrderEditBtn = document.getElementById('closeOrderEditBtn');
            const cancelOrderEditBtn = document.getElementById('cancelOrderEditBtn');
            const saveOrderEditBtn = document.getElementById('saveOrderEditBtn');
            
            // Close order edit modal
            closeOrderEditBtn.addEventListener('click', function() {
                orderEditModal.classList.remove('active');
                currentEditingOrder = null;
            });
            
            // Cancel order edit
            cancelOrderEditBtn.addEventListener('click', function() {
                orderEditModal.classList.remove('active');
                currentEditingOrder = null;
                showNotification('Edit cancelled', 'info');
            });
            
            // Save order edit
            saveOrderEditBtn.addEventListener('click', function() {
                // Get form values
                const newStatus = document.getElementById('singleEditStatus').value;
                const newChannel = document.getElementById('singleEditChannel').value;
                const newPayment = document.getElementById('singleEditPayment').value;
                const newFulfillment = document.getElementById('singleEditFulfillment').value;
                const newProduct = document.getElementById('singleEditProduct').value;
                const newCustomer = document.getElementById('singleEditCustomer').value;
                const newAddress = document.getElementById('singleEditAddress').value;
                const notes = document.getElementById('singleEditNotes').value;
                
                // Show saving notification
                const originalText = saveOrderEditBtn.innerHTML;
                saveOrderEditBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
                saveOrderEditBtn.disabled = true;
                
                // Simulate save process
                setTimeout(() => {
                    // Find and update the order in the data
                    const allOrders = ordersData[category];
                    const orderIndex = allOrders.findIndex(order => order.id === orderId);
                    
                    if (orderIndex !== -1) {
                        // Update the order
                        ordersData[category][orderIndex] = {
                            ...ordersData[category][orderIndex],
                            status: newStatus,
                            channel: newChannel,
                            payment: newPayment,
                            fulfillment: newFulfillment,
                            product: newProduct,
                            customer: newCustomer,
                            address: newAddress
                        };
                        
                        // Reinitialize all orders
                        initializeAllOrders();
                    }
                    
                    // Restore button
                    saveOrderEditBtn.innerHTML = originalText;
                    saveOrderEditBtn.disabled = false;
                    
                    // Close modal
                    orderEditModal.classList.remove('active');
                    currentEditingOrder = null;
                    
                    // Show success notification
                    showNotification(`Successfully updated order: ${orderId}`, 'success');
                    
                    // Refresh the content
                    renderContent();
                }, 1500);
            });
            
            // Live preview updates
            const statusSelect = document.getElementById('singleEditStatus');
            const channelSelect = document.getElementById('singleEditChannel');
            const paymentSelect = document.getElementById('singleEditPayment');
            
            if (statusSelect) {
                statusSelect.addEventListener('change', function() {
                    const statusPreview = document.getElementById('statusPreview');
                    if (statusPreview) {
                        statusPreview.textContent = this.value;
                    }
                });
            }
            
            if (channelSelect) {
                channelSelect.addEventListener('change', function() {
                    const channelPreview = document.getElementById('channelPreview');
                    if (channelPreview) {
                        channelPreview.textContent = this.value;
                    }
                });
            }
            
            if (paymentSelect) {
                paymentSelect.addEventListener('change', function() {
                    const paymentPreview = document.getElementById('paymentPreview');
                    if (paymentPreview) {
                        paymentPreview.textContent = this.value;
                    }
                });
            }
            
            // Close on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && orderEditModal.classList.contains('active')) {
                    orderEditModal.classList.remove('active');
                    currentEditingOrder = null;
                    showNotification('Edit cancelled', 'info');
                }
            });
        }

        // Delete single order
        function deleteSingleOrder(orderId) {
            if (!confirm(`Are you sure you want to delete order ${orderId}? This action cannot be undone.`)) {
                return;
            }
            
            showNotification(`Deleting order: ${orderId}...`, 'info');
            
            // Simulate delete process
            setTimeout(() => {
                // Find and remove the order from all categories
                let deleted = false;
                
                for (const [category, orders] of Object.entries(ordersData)) {
                    if (category !== 'all') {
                        const orderIndex = orders.findIndex(order => order.id === orderId);
                        if (orderIndex !== -1) {
                            orders.splice(orderIndex, 1);
                            deleted = true;
                            break;
                        }
                    }
                }
                
                if (deleted) {
                    // Reinitialize all orders
                    initializeAllOrders();
                    
                    // Remove from selected orders if present
                    selectedOrders.delete(orderId);
                    
                    // Update UI
                    updateBulkActions();
                    renderContent();
                    
                    showNotification(`Successfully deleted order: ${orderId}`, 'success');
                } else {
                    showNotification(`Order ${orderId} not found`, 'error');
                }
            }, 1000);
        }

        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Become a Vendor | Marketplace</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: #f5f7fa;
      color: #333;
      line-height: 1.6;
    }

    /* Main Layout Classes */
    .registration-data .page-container {
      display: flex;
      min-height: 100vh;
      max-width: 1200px;
      margin: 0 auto;
    }

    .registration-data .content-wrapper {
      flex: 1;
      padding: 40px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }

    /* Card Components */
    .registration-data .card {
      background: white;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      padding: 40px;
      width: 100%;
    }

    /* Registration Card */
    .registration-data .registration-card {
      max-width: 800px;
    }

    /* Login Card */
    .registration-data .login-card {
      margin-left: 30px;
      max-width: 380px;
      align-self: flex-start;
    }

    /* Header Components */
    .registration-data .section-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .registration-data .section-header--left {
      text-align: left;
    }

    .registration-data .section-header__title {
      color: #2c3e50;
      font-size: 2.2rem;
      margin-bottom: 10px;
    }

    .registration-data .section-header__title--medium {
      font-size: 1.8rem;
    }

    .registration-data .section-header__title--small {
      font-size: 1.5rem;
    }

    .registration-data .section-header__subtitle {
      color: #7f8c8d;
      font-size: 1rem;
    }

    /* Form Components */
    .registration-data .form {
      width: 100%;
    }

    .registration-data .form__group {
      margin-bottom: 20px;
    }

    .registration-data .form__row {
      display: flex;
      gap: 20px;
    }

    .registration-data .form__row .form__group {
      flex: 1;
    }

    .registration-data .form__label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #2c3e50;
      font-size: 0.95rem;
    }

    .registration-data .form__input {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 16px;
      transition: border 0.3s;
    }

    .registration-data .form__input:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
    }

    .registration-data .form__select {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 16px;
      transition: border 0.3s;
      background-color: white;
      cursor: pointer;
    }

    .registration-data .form__select:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
    }

    /* Password Input Components */
    .registration-data .password-input {
      position: relative;
    }

    .registration-data .password-input__toggle {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: #7f8c8d;
      cursor: pointer;
      font-size: 16px;
      padding: 0;
      width: 24px;
      height: 24px;
    }

    /* Required Field Indicator */
    .registration-data .required-field::after {
      content: " *";
      color: #e74c3c;
    }

    /* Button Components */
    .registration-data .btn {
      border: none;
      padding: 15px;
      font-size: 18px;
      font-weight: 600;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
      transition: background-color 0.3s;
      margin-top: 10px;
    }

    .registration-data .btn--primary {
      background-color: #3498db;
      color: white;
    }

    .registration-data .btn--primary:hover {
      background-color: #2980b9;
    }

    .registration-data .btn--secondary {
      background-color: #2ecc71;
      color: white;
      padding: 12px;
      font-size: 16px;
    }

    .registration-data .btn--secondary:hover {
      background-color: #27ae60;
    }

    .registration-data .btn--tertiary {
      background-color: #9b59b6;
      color: white;
      padding: 12px;
      font-size: 16px;
    }

    .registration-data .btn--tertiary:hover {
      background-color: #8e44ad;
    }

    /* Link Components */
    .registration-data .link-container {
      text-align: center;
      margin-top: 25px;
      color: #7f8c8d;
      font-size: 0.95rem;
    }

    .registration-data .link-container--small {
      margin-top: 20px;
    }

    .registration-data .link {
      color: #3498db;
      text-decoration: none;
      font-weight: 600;
    }

    .registration-data .link:hover {
      text-decoration: underline;
    }

    /* Benefits List */
    .registration-data .benefits-list {
      list-style: none;
      background: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
      margin-top: 30px;
    }

    .registration-data .benefits-list__item {
      margin-bottom: 12px;
      display: flex;
      align-items: flex-start;
      padding: 8px 0;
    }

    .registration-data .benefits-list__icon {
      margin-right: 12px;
      color: #3498db;
      margin-top: 3px;
      flex-shrink: 0;
    }

    /* Forgot Password */
    .registration-data .forgot-password {
      text-align: right;
      margin-top: 10px;
    }

    .registration-data .forgot-password__link {
      color: #3498db;
      text-decoration: none;
      font-size: 14px;
    }

    .registration-data .forgot-password__link:hover {
      text-decoration: underline;
    }

    /* Back Link */
    .registration-data .back-link {
      text-align: center;
      margin-top: 20px;
    }

    .registration-data .back-link__anchor {
      color: #3498db;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }

    .registration-data .back-link__anchor:hover {
      text-decoration: underline;
    }

    /* Message Components */
    .registration-data .message {
      padding: 12px;
      border-radius: 5px;
      margin-bottom: 20px;
      text-align: center;
    }

    .registration-data .message--error {
      color: #e74c3c;
      font-size: 0.85rem;
      margin-top: 5px;
      text-align: left;
      display: none;
    }

    .registration-data .message--success {
      background-color: #d4edda;
      color: #155724;
      display: none;
    }

    .registration-data .message--info {
      background-color: #d1ecf1;
      color: #0c5460;
      display: none;
    }

    /* OTP Input */
    .registration-data .otp-container {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
    }

    .registration-data .otp-input {
      width: 42px;
      height: 42px;
      text-align: center;
      font-size: 24px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-weight: bold;
    }

    .registration-data .otp-input:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
    }

    /* Countdown Timer */
    .registration-data .countdown-timer {
      text-align: center;
      margin: 15px 0;
      color: #e74c3c;
      font-weight: bold;
    }

    /* Resend OTP Link */
    .registration-data .resend-otp {
      text-align: center;
      margin-top: 10px;
    }

    .registration-data .resend-otp__link {
      color: #3498db;
      text-decoration: none;
      font-weight: 600;
      cursor: pointer;
    }

    .registration-data .resend-otp__link:hover {
      text-decoration: underline;
    }

    .registration-data .resend-otp__link.disabled {
      color: #95a5a6;
      cursor: not-allowed;
    }

    /* Loading States */
    .registration-data .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(52, 152, 219, 0.3);
      border-radius: 50%;
      border-top-color: #3498db;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /* Responsive Design */
    @media (max-width: 992px) {
      .registration-data .page-container {
        flex-direction: column;
      }

      .registration-data .content-wrapper {
        flex-direction: column;
        padding: 20px;
      }

      .registration-data .registration-card {
        padding: 30px;
      }

      .registration-data .login-card {
        margin: 30px 0 0 0;
        max-width: 100%;
      }
    }

    @media (max-width: 768px) {
      .registration-data .form__row {
        flex-direction: column;
        gap: 0;
      }

      .registration-data .section-header__title {
        font-size: 1.8rem;
      }

      .registration-data .benefits-list__item {
        font-size: 0.9rem;
      }

      .registration-data .otp-container {
        gap: 5px;
      }

      .registration-data .otp-input {
        width: 40px;
        height: 50px;
        font-size: 20px;
      }
    }

    @media (max-width: 480px) {
      .registration-data .registration-card {
        padding: 20px;
      }

      .registration-data .section-header__title--medium {
        font-size: 1.5rem;
      }

      .registration-data .section-header__title--small {
        font-size: 1.3rem;
      }

      .registration-data .btn {
        padding: 12px;
        font-size: 16px;
      }
    }
  </style>
</head>

<body>
  <!-- Vendor Registration Page -->
  <div class="page-container registration-data" id="registrationPage">
    <!-- Right Panel with registration form and login sidebar -->
    <div class="content-wrapper">
      <div class="card registration-card">
        <div class="section-header">
          <h1 class="section-header__title">Become a Vendor</h1>
          <p class="section-header__subtitle">Join our marketplace and start selling to millions of customers</p>
        </div>

        <div class="message message--success" id="successMessage">
          Registration successful! Please check your email to confirm your account.
        </div>

        <form class="form" id="vendorRegistrationForm">
          <div class="form__row">
            <div class="form__group">
              <label for="companyName" class="form__label required-field">Company Name</label>
              <input type="text" id="companyName" name="companyName" class="form__input" required>
              <div class="message message--error" id="companyNameError">Please enter your company name</div>
            </div>
            <div class="form__group">
              <label for="brandName" class="form__label required-field">Brand Name</label>
              <input type="text" id="brandName" name="brandName" class="form__input">
            </div>
          </div>

          <div class="form__group">
            <label for="website" class="form__label">Website</label>
            <input type="url" id="website" name="website" class="form__input">
          </div>

          <div class="form__row">
            <div class="form__group">
              <label for="contactName" class="form__label required-field">Contact Name</label>
              <input type="text" id="contactName" name="contactName" class="form__input" required>
              <div class="message message--error" id="contactNameError">Please enter the contact person's name</div>
            </div>
            <div class="form__group">
              <label for="phone" class="form__label required-field">Phone</label>
              <input type="tel" id="phone" name="phone" class="form__input" required>
              <div class="message message--error" id="phoneError">Please enter a valid phone number</div>
            </div>
          </div>

          <div class="form__group">
            <label for="email" class="form__label required-field">Email Address</label>
            <input type="email" id="email" name="email" class="form__input" placeholder="madge.stark@example.com"
              required>
            <div class="message message--error" id="emailError">Please enter a valid email address</div>
          </div>

          <div class="form__row">
            <div class="form__group">
              <label for="password" class="form__label required-field">Password</label>
              <div class="password-input">
                <input type="password" id="password" name="password" class="form__input" required>
                <button type="button" class="password-input__toggle" id="togglePassword">
                  <i class="fas fa-eye"></i>
                </button>
              </div>
              <div class="message message--error" id="passwordError">Password must be at least 8 characters</div>
            </div>
            <div class="form__group">
              <label for="confirmPassword" class="form__label required-field">Confirm Password</label>
              <div class="password-input">
                <input type="password" id="confirmPassword" name="confirmPassword" class="form__input" required>
                <button type="button" class="password-input__toggle" id="toggleConfirmPassword">
                  <i class="fas fa-eye"></i>
                </button>
              </div>
              <div class="message message--error" id="confirmPasswordError">Passwords do not match</div>
            </div>
          </div>

          <div class="form__group">
            <label for="address1" class="form__label required-field">Address Line 1</label>
            <input type="text" id="address1" name="address1" class="form__input" required>
            <div class="message message--error" id="address1Error">Please enter your address</div>
          </div>

          <div class="form__group">
            <label for="address2" class="form__label">Address Line 2</label>
            <input type="text" id="address2" name="address2" class="form__input">
          </div>

          <div class="form__row">
            <div class="form__group">
              <label for="country" class="form__label required-field">Select Country</label>
              <select id="country" name="country" class="form__select" required>
                <option value="">Select Country</option>
                <!-- Options will be loaded from external JS file -->
                <option value="" disabled id="loadingCountries">Loading countries...</option>
              </select>
              <div class="message message--error" id="countryError">Please select a country</div>
            </div>
            <div class="form__group">
              <label for="state" class="form__label required-field">Select State</label>
              <select id="state" name="state" class="form__select" required disabled>
                <option value="">Select State</option>
                <option value="" disabled id="loadingStates">Please select a country first</option>
              </select>
              <div class="message message--error" id="stateError">Please select a state</div>
            </div>
          </div>

          <div class="form__row">
            <div class="form__group">
              <label for="city" class="form__label required-field">City</label>
              <input type="text" id="city" name="city" class="form__input" required>
              <div class="message message--error" id="cityError">Please enter your city</div>
            </div>
            <div class="form__group">
              <label for="zipCode" class="form__label required-field">Zip Code</label>
              <input type="text" id="zipCode" name="zipCode" class="form__input" required>
              <div class="message message--error" id="zipCodeError">Please enter a valid zip code</div>
            </div>
          </div>

          <button type="submit" class="btn btn--primary">
            <span id="registerButtonText">Register as Vendor</span>
            <span id="registerButtonLoading" style="display: none;" class="loading"></span>
          </button>
        </form>

        <div class="link-container">
          Already a seller? <a href="#" class="link" id="existingSellerLogin">Login here</a>
        </div>
      </div>

      <!-- Existing Seller Login Sidebar -->
      <div class="card login-card" id="loginSidebar">
        <div class="section-header section-header--left">
          <h2 class="section-header__title section-header__title--medium">Existing Seller Login</h2>
          <p class="section-header__subtitle">Access your vendor dashboard</p>
        </div>

        <!-- Main Login Form -->
        <form class="form" id="sellerLoginForm">
          <div class="form__group">
            <label for="loginEmail" class="form__label required-field">Email Address</label>
            <input type="email" id="loginEmail" name="loginEmail" class="form__input"
              placeholder="your.email@example.com" required>
            <div class="message message--error" id="loginEmailError">Please enter your email</div>
          </div>

          <div class="form__group">
            <label for="loginPassword" class="form__label required-field">Password</label>
            <div class="password-input">
              <input type="password" id="loginPassword" name="loginPassword" class="form__input" required>
              <button type="button" class="password-input__toggle" id="toggleLoginPassword">
                <i class="fas fa-eye"></i>
              </button>
            </div>
            <div class="message message--error" id="loginPasswordError">Please enter your password</div>
          </div>

          <div class="forgot-password">
            <a href="#" class="forgot-password__link" id="forgotPasswordLink">Forgot Password?</a>
          </div>

          <button type="submit" class="btn btn--secondary">Login to Dashboard</button>
        </form>

        <!-- Forgot Password - Send OTP Form -->
        <div id="forgotPasswordForm" style="display: none;">
          <div class="section-header section-header--left">
            <h2 class="section-header__title section-header__title--small">Reset Password</h2>
            <p class="section-header__subtitle">Enter your email to receive OTP</p>
          </div>

          <form class="form" id="sendOTPForm">
            <div class="form__group">
              <label for="forgotEmail" class="form__label required-field">Email Address</label>
              <input type="email" id="forgotEmail" name="forgotEmail" class="form__input"
                placeholder="your.email@example.com" required>
              <div class="message message--error" id="forgotEmailError">Please enter your email</div>
            </div>

            <div class="message message--info" id="otpSentMessage">
              OTP has been sent to your email. Please check your inbox.
            </div>

            <button type="submit" class="btn btn--tertiary">Send OTP</button>
          </form>

          <div class="back-link">
            <a href="#" class="back-link__anchor" id="backToLoginFromForgot">
              <i class="fas fa-arrow-left"></i> Back to Login
            </a>
          </div>
        </div>

        <!-- Reset Password with OTP Form -->
        <div id="resetPasswordForm" style="display: none;">
          <div class="section-header section-header--left">
            <h2 class="section-header__title section-header__title--small">Set New Password</h2>
            <p class="section-header__subtitle">Enter OTP and new password</p>
          </div>

          <form class="form" id="resetPasswordWithOTPForm">

            <div class="form__group">
              <label for="newPassword" class="form__label required-field">New Password</label>
              <div class="password-input">
                <input type="password" id="newPassword" name="newPassword" class="form__input" required>
                <button type="button" class="password-input__toggle" id="toggleNewPassword">
                  <i class="fas fa-eye"></i>
                </button>
              </div>
              <div class="message message--error" id="newPasswordError">Password must be at least 8 characters</div>
            </div>

            <div class="form__group">
              <label for="confirmNewPassword" class="form__label required-field">Confirm New Password</label>
              <div class="password-input">
                <input type="password" id="confirmNewPassword" name="confirmNewPassword" class="form__input" required>
                <button type="button" class="password-input__toggle" id="toggleConfirmNewPassword">
                  <i class="fas fa-eye"></i>
                </button>
              </div>
              <div class="message message--error" id="confirmNewPasswordError">Passwords do not match</div>
            </div>

            <div class="form__group">
              <label for="otp" class="form__label required-field">Enter OTP</label>
              <div class="otp-container">
                <input type="text" maxlength="1" class="otp-input" id="otp1" data-index="1">
                <input type="text" maxlength="1" class="otp-input" id="otp2" data-index="2">
                <input type="text" maxlength="1" class="otp-input" id="otp3" data-index="3">
                <input type="text" maxlength="1" class="otp-input" id="otp4" data-index="4">
                <input type="text" maxlength="1" class="otp-input" id="otp5" data-index="5">
                <input type="text" maxlength="1" class="otp-input" id="otp6" data-index="6">
              </div>
              <input type="hidden" id="fullOTP" name="fullOTP">
              <div class="message message--error" id="otpError">Please enter the 6-digit OTP</div>

              <div class="countdown-timer" id="countdownTimer">
                OTP expires in: <span id="timer">02:00</span>
              </div>

              <div class="resend-otp">
                <a href="#" class="resend-otp__link disabled" id="resendOTPLink">
                  Resend OTP (60s)
                </a>
              </div>
            </div>


            <div class="message message--success" id="passwordResetSuccess">
              Password reset successfully! Redirecting to login...
            </div>

            <button type="submit" class="btn btn--tertiary">Reset Password</button>
          </form>

          <div class="back-link">
            <a href="#" class="back-link__anchor" id="backToForgotPassword">
              <i class="fas fa-arrow-left"></i> Back to Email Entry
            </a>
          </div>
        </div>

        <div class="link-container link-container--small" id="merchantLoginSection">
          <p>Need merchant access? <a href="#" class="link" id="merchantLoginLink">Merchant Login</a></p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Global variables for countries and states data
    let countriesAndStatesData = null;

    document.addEventListener('DOMContentLoaded', function () {
      // Page elements
      const registrationPage = document.getElementById('registrationPage');
      const loginSidebar = document.getElementById('loginSidebar');
      const existingSellerLogin = document.getElementById('existingSellerLogin');
      const forgotPasswordLink = document.getElementById('forgotPasswordLink');
      const merchantLoginLink = document.getElementById('merchantLoginLink');
      const sellerLoginForm = document.getElementById('sellerLoginForm');
      const forgotPasswordForm = document.getElementById('forgotPasswordForm');
      const resetPasswordForm = document.getElementById('resetPasswordForm');
      const backToLoginFromForgot = document.getElementById('backToLoginFromForgot');
      const backToForgotPassword = document.getElementById('backToForgotPassword');
      const sendOTPForm = document.getElementById('sendOTPForm');
      const resetPasswordWithOTPForm = document.getElementById('resetPasswordWithOTPForm');
      const merchantLoginSection = document.getElementById('merchantLoginSection');
      const countrySelect = document.getElementById('country');
      const stateSelect = document.getElementById('state');

      // Password toggle functionality for all forms
      function setupPasswordToggle(passwordId, toggleId) {
        const toggleBtn = document.getElementById(toggleId);
        const passwordInput = document.getElementById(passwordId);

        if (toggleBtn && passwordInput) {
          toggleBtn.addEventListener('click', function () {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            const icon = this.querySelector('i');
            icon.classList.toggle('fa-eye');
            icon.classList.toggle('fa-eye-slash');
          });
        }
      }

      // Setup all password toggles
      setupPasswordToggle('password', 'togglePassword');
      setupPasswordToggle('confirmPassword', 'toggleConfirmPassword');
      setupPasswordToggle('loginPassword', 'toggleLoginPassword');
      setupPasswordToggle('newPassword', 'toggleNewPassword');
      setupPasswordToggle('confirmNewPassword', 'toggleConfirmNewPassword');

      // Function to load countries and states data from external JS file
      async function loadCountriesAndStatesData() {
        try {
          // Show loading state
          const loadingOption = document.getElementById('loadingCountries');
          if (loadingOption) {
            loadingOption.textContent = 'Loading countries...';
          }

          
          const response = await fetch('js/states.js');

          if (response.ok) {
            const dataText = await response.text();
         const match = dataText.match(/const country_and_states = ({[\s\S]*});/);

            if (match) {
              // Use eval to parse the JSON (in production, use proper JSON parsing)
              try {
                const country_and_states = eval('(' + match[1] + ')');
                countriesAndStatesData = country_and_states;
                console.log('Loaded data from states.js:', countriesAndStatesData);
              } catch (e) {
                console.error('Error parsing data from states.js:', e);
                loadFallbackData();
              }
            } else {
              console.warn('Could not find country_and_states object in states.js');
              loadFallbackData();
            }
          } else {
            console.warn('states.js file not found, using fallback data');
            loadFallbackData();
          }

          // Populate country dropdown after data is loaded
          populateCountryDropdown(countrySelect);
        } catch (error) {
          console.error('Error loading countries data:', error);
          loadFallbackData();
          populateCountryDropdown(countrySelect);
        }
      }

      // Fallback data in case external file is not available
      function loadFallbackData() {
        countriesAndStatesData = {
          country: {
            "IN": "India",
            "US": "United States",
            "AE": "United Arab Emirates",
            "GB": "United Kingdom",
            "CA": "Canada",
            "AU": "Australia",
            "DE": "Germany"
          },
          states: {
            "IN": [
              { "code": "DL", "name": "Delhi" },
              { "code": "MH", "name": "Maharashtra" },
              { "code": "KA", "name": "Karnataka" },
              { "code": "TN", "name": "Tamil Nadu" },
              { "code": "GJ", "name": "Gujarat" }
            ],
            "US": [
              { "code": "CA", "name": "California" },
              { "code": "TX", "name": "Texas" },
              { "code": "FL", "name": "Florida" },
              { "code": "NY", "name": "New York" },
              { "code": "WA", "name": "Washington" }
            ],
            "AE": [
              { "code": "DU", "name": "Dubai" },
              { "code": "AB", "name": "Abu Dhabi" },
              { "code": "SH", "name": "Sharjah" },
              { "code": "AJ", "name": "Ajman" },
              { "code": "RA", "name": "Ras Al Khaimah" }
            ],
            "GB": [
              { "code": "ENG", "name": "England" },
              { "code": "SCT", "name": "Scotland" },
              { "code": "WLS", "name": "Wales" },
              { "code": "NIR", "name": "Northern Ireland" }
            ],
            "CA": [
              { "code": "ON", "name": "Ontario" },
              { "code": "BC", "name": "British Columbia" },
              { "code": "QC", "name": "Quebec" },
              { "code": "AB", "name": "Alberta" }
            ],
            "AU": [
              { "code": "NSW", "name": "New South Wales" },
              { "code": "VIC", "name": "Victoria" },
              { "code": "QLD", "name": "Queensland" },
              { "code": "WA", "name": "Western Australia" }
            ],
            "DE": [
              { "code": "BY", "name": "Bavaria" },
              { "code": "BE", "name": "Berlin" },
              { "code": "HH", "name": "Hamburg" },
              { "code": "NW", "name": "North Rhine-Westphalia" }
            ]
          }
        };
      }

      // Function to populate country dropdown from the loaded data
      function populateCountryDropdown(selectElement) {
        if (!countriesAndStatesData || !countriesAndStatesData.country) {
          console.error('Countries data not loaded yet');
          return;
        }

        // Clear existing options except the first one
        selectElement.innerHTML = '<option value="">Select Country</option>';

        // Add countries from the data
        for (const [code, name] of Object.entries(countriesAndStatesData.country)) {
          const option = document.createElement('option');
          option.value = code;
          option.textContent = name;
          selectElement.appendChild(option);
        }

        // Remove loading message if present
        const loadingOption = document.getElementById('loadingCountries');
        if (loadingOption) {
          loadingOption.remove();
        }
      }

      // Function to populate state dropdown based on country
      function populateStateDropdown(countryCode, stateSelectElement) {
        stateSelectElement.innerHTML = '<option value="">Select State</option>';
        stateSelectElement.disabled = true;

        if (!countryCode || !countriesAndStatesData || !countriesAndStatesData.states) {
          return;
        }

        const states = countriesAndStatesData.states[countryCode];

        if (states && Array.isArray(states)) {
          stateSelectElement.disabled = false;

          // Sort states alphabetically by name
          const sortedStates = [...states].sort((a, b) => a.name.localeCompare(b.name));

          sortedStates.forEach(state => {
            const option = document.createElement('option');
            option.value = state.code;
            option.textContent = state.name;
            stateSelectElement.appendChild(option);
          });
        }

        // Remove loading message if present
        const loadingOption = document.getElementById('loadingStates');
        if (loadingOption) {
          loadingOption.remove();
        }
      }

      // Load countries data when page loads
      loadCountriesAndStatesData();

      // Country-State dropdown logic
      countrySelect.addEventListener('change', function () {
        const country = this.value;
        populateStateDropdown(country, stateSelect);
        document.getElementById('stateError').style.display = 'none';
      });

      // Navigation between pages
      existingSellerLogin.addEventListener('click', function (e) {
        e.preventDefault();
        // Scroll to login sidebar
        loginSidebar.scrollIntoView({ behavior: 'smooth' });
      });

      // Forgot password link - show email form
      forgotPasswordLink.addEventListener('click', function (e) {
        e.preventDefault();
        showForgotPasswordForm();
      });

      // Back to login from forgot password
      backToLoginFromForgot.addEventListener('click', function (e) {
        e.preventDefault();
        showLoginForm();
      });

      // Back to forgot password from reset password
      backToForgotPassword.addEventListener('click', function (e) {
        e.preventDefault();
        showForgotPasswordForm();
      });

      // Merchant login link
      merchantLoginLink.addEventListener('click', function (e) {
        e.preventDefault();
        alert('Redirecting to merchant login page...');
      });

      // Show login form
      function showLoginForm() {
        sellerLoginForm.style.display = 'block';
        forgotPasswordForm.style.display = 'none';
        resetPasswordForm.style.display = 'none';
        merchantLoginSection.style.display = 'block';
      }

      // Show forgot password form
      function showForgotPasswordForm() {
        sellerLoginForm.style.display = 'none';
        forgotPasswordForm.style.display = 'block';
        resetPasswordForm.style.display = 'none';
        merchantLoginSection.style.display = 'none';

        // Reset form
        document.getElementById('forgotEmail').value = '';
        document.getElementById('otpSentMessage').style.display = 'none';
      }

      // Show reset password form
      function showResetPasswordForm() {
        sellerLoginForm.style.display = 'none';
        forgotPasswordForm.style.display = 'none';
        resetPasswordForm.style.display = 'block';
        merchantLoginSection.style.display = 'none';

        // Reset OTP inputs
        resetOTPInputs();
        startOTPTimer();
      }

      // Vendor Registration Form Validation
      const vendorForm = document.getElementById('vendorRegistrationForm');
      const successMessage = document.getElementById('successMessage');
      const registerButtonText = document.getElementById('registerButtonText');
      const registerButtonLoading = document.getElementById('registerButtonLoading');

      vendorForm.addEventListener('submit', async function (e) {
        e.preventDefault();

        // Show loading state
        registerButtonText.style.display = 'none';
        registerButtonLoading.style.display = 'inline-block';

        let isValid = validateVendorForm();

        if (isValid) {
          // Simulate API call delay
          await new Promise(resolve => setTimeout(resolve, 1500));

          successMessage.style.display = 'block';
          vendorForm.reset();
          // Reset state dropdown
          stateSelect.innerHTML = '<option value="">Select State</option>';
          stateSelect.disabled = true;
          window.scrollTo({ top: 0, behavior: 'smooth' });

          setTimeout(() => {
            successMessage.style.display = 'none';
          }, 5000);
        }

        // Hide loading state
        registerButtonText.style.display = 'inline-block';
        registerButtonLoading.style.display = 'none';
      });

      function validateVendorForm() {
        let isValid = true;

        // Reset error messages
        document.querySelectorAll('.message--error').forEach(msg => {
          msg.style.display = 'none';
        });

        // Validate required fields
        const requiredFields = [
          'companyName', 'contactName', 'phone', 'email',
          'password', 'confirmPassword', 'address1',
          'country', 'state', 'city', 'zipCode'
        ];

        requiredFields.forEach(fieldId => {
          const field = document.getElementById(fieldId);
          if (field && !field.value.trim()) {
            isValid = false;
            const errorElement = document.getElementById(fieldId + 'Error');
            if (errorElement) {
              errorElement.style.display = 'block';
            }
          }
        });

        // Validate email
        const emailField = document.getElementById('email');
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (emailField.value && !emailRegex.test(emailField.value)) {
          isValid = false;
          document.getElementById('emailError').textContent = 'Please enter a valid email address';
          document.getElementById('emailError').style.display = 'block';
        }

        // Validate password
        const passwordField = document.getElementById('password');
        if (passwordField.value && passwordField.value.length < 8) {
          isValid = false;
          document.getElementById('passwordError').style.display = 'block';
        }

        // Validate password match
        const confirmPassword = document.getElementById('confirmPassword');
        if (passwordField.value !== confirmPassword.value) {
          isValid = false;
          document.getElementById('confirmPasswordError').style.display = 'block';
        }

        return isValid;
      }

      // Seller Login Form (Simplified - no country/state validation)
      sellerLoginForm.addEventListener('submit', function (e) {
        e.preventDefault();
        let isValid = true;

        // Reset errors
        document.getElementById('loginEmailError').style.display = 'none';
        document.getElementById('loginPasswordError').style.display = 'none';

        // Validate
        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;

        if (!email) {
          isValid = false;
          document.getElementById('loginEmailError').style.display = 'block';
        }

        if (!password) {
          isValid = false;
          document.getElementById('loginPasswordError').style.display = 'block';
        }

        if (isValid) {
          alert('Seller login successful! Redirecting to dashboard...');
          // In real implementation, you would redirect to dashboard
        }
      });

      // Send OTP Form
      sendOTPForm.addEventListener('submit', function (e) {
        e.preventDefault();
        const emailField = document.getElementById('forgotEmail');
        const email = emailField.value.trim();
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

        // Reset error
        document.getElementById('forgotEmailError').style.display = 'none';

        if (!email || !emailRegex.test(email)) {
          document.getElementById('forgotEmailError').textContent = 'Please enter a valid email address';
          document.getElementById('forgotEmailError').style.display = 'block';
          return;
        }

        // Simulate sending OTP
        document.getElementById('otpSentMessage').style.display = 'block';
        emailField.disabled = true;

        // Show reset password form after 2 seconds
        setTimeout(() => {
          showResetPasswordForm();
        }, 2000);
      });

      // OTP Input Handling
      function setupOTPInputs() {
        const otpInputs = document.querySelectorAll('.otp-input');

        otpInputs.forEach(input => {
          input.addEventListener('input', function () {
            const nextIndex = parseInt(this.getAttribute('data-index')) + 1;
            const nextInput = document.getElementById('otp' + nextIndex);

            if (this.value.length === 1 && nextInput) {
              nextInput.focus();
            }

            updateFullOTP();
          });

          input.addEventListener('keydown', function (e) {
            if (e.key === 'Backspace' && this.value.length === 0) {
              const prevIndex = parseInt(this.getAttribute('data-index')) - 1;
              const prevInput = document.getElementById('otp' + prevIndex);

              if (prevInput) {
                prevInput.focus();
              }
            }
          });
        });
      }

      function updateFullOTP() {
        let fullOTP = '';
        const otpInputs = document.querySelectorAll('.otp-input');

        otpInputs.forEach(input => {
          fullOTP += input.value;
        });

        document.getElementById('fullOTP').value = fullOTP;
      }

      function resetOTPInputs() {
        const otpInputs = document.querySelectorAll('.otp-input');
        otpInputs.forEach(input => {
          input.value = '';
        });
        updateFullOTP();
      }

      // Initialize OTP inputs
      setupOTPInputs();

      // OTP Timer
      let otpTimer;
      let timeLeft = 120; // 2 minutes in seconds

      function startOTPTimer() {
        timeLeft = 120;
        const timerElement = document.getElementById('timer');
        const resendLink = document.getElementById('resendOTPLink');

        // Disable resend link initially
        resendLink.classList.add('disabled');
        resendLink.textContent = 'Resend OTP (120s)';

        clearInterval(otpTimer);

        otpTimer = setInterval(() => {
          timeLeft--;

          const minutes = Math.floor(timeLeft / 60);
          const seconds = timeLeft % 60;
          timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

          // Update resend link countdown
          if (timeLeft <= 60) {
            resendLink.textContent = `Resend OTP (${timeLeft}s)`;
          }

          if (timeLeft <= 0) {
            clearInterval(otpTimer);
            timerElement.textContent = '00:00';
            resendLink.textContent = 'Resend OTP';
            resendLink.classList.remove('disabled');
          }
        }, 1000);
      }

      // Resend OTP
      document.getElementById('resendOTPLink').addEventListener('click', function (e) {
        e.preventDefault();

        if (this.classList.contains('disabled')) {
          return;
        }

        // Simulate resending OTP
        alert('New OTP has been sent to your email.');
        resetOTPInputs();
        startOTPTimer();
      });

      // Reset Password with OTP Form
      resetPasswordWithOTPForm.addEventListener('submit', function (e) {
        e.preventDefault();

        // Reset errors
        document.getElementById('otpError').style.display = 'none';
        document.getElementById('newPasswordError').style.display = 'none';
        document.getElementById('confirmNewPasswordError').style.display = 'none';

        // Get values
        const fullOTP = document.getElementById('fullOTP').value;
        const newPassword = document.getElementById('newPassword').value;
        const confirmNewPassword = document.getElementById('confirmNewPassword').value;

        let isValid = true;

        // Validate OTP
        if (fullOTP.length !== 6) {
          isValid = false;
          document.getElementById('otpError').style.display = 'block';
        }

        // Validate password
        if (newPassword.length < 8) {
          isValid = false;
          document.getElementById('newPasswordError').style.display = 'block';
        }

        // Validate password match
        if (newPassword !== confirmNewPassword) {
          isValid = false;
          document.getElementById('confirmNewPasswordError').style.display = 'block';
        }

        if (isValid) {
          // Show success message
          document.getElementById('passwordResetSuccess').style.display = 'block';

          // Simulate API call and redirect
          setTimeout(() => {
            document.getElementById('passwordResetSuccess').style.display = 'none';
            showLoginForm();
            alert('Password has been reset successfully. Please login with your new password.');
          }, 2000);
        }
      });

      // Real-time validation for vendor registration
      setupRealTimeValidation('email', validateEmail);
      setupRealTimeValidation('password', validatePassword);
      setupRealTimeValidation('confirmPassword', validateConfirmPassword);

      function setupRealTimeValidation(fieldId, validationFn) {
        const field = document.getElementById(fieldId);
        if (field) {
          field.addEventListener('input', validationFn);
          field.addEventListener('blur', validationFn);
        }
      }

      function validateEmail() {
        const emailField = document.getElementById('email');
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        const errorElement = document.getElementById('emailError');

        if (emailField.value && !emailRegex.test(emailField.value)) {
          errorElement.textContent = 'Please enter a valid email address';
          errorElement.style.display = 'block';
        } else {
          errorElement.style.display = 'none';
        }
      }

      function validatePassword() {
        const passwordField = document.getElementById('password');
        const errorElement = document.getElementById('passwordError');

        if (passwordField.value && passwordField.value.length < 8) {
          errorElement.style.display = 'block';
        } else {
          errorElement.style.display = 'none';
        }

        // Also validate confirm password
        validateConfirmPassword();
      }

      function validateConfirmPassword() {
        const passwordField = document.getElementById('password');
        const confirmField = document.getElementById('confirmPassword');
        const errorElement = document.getElementById('confirmPasswordError');

        if (confirmField.value && passwordField.value !== confirmField.value) {
          errorElement.style.display = 'block';
        } else {
          errorElement.style.display = 'none';
        }
      }

      // Phone number validation
      const phoneField = document.getElementById('phone');
      phoneField.addEventListener('input', function () {
        const errorElement = document.getElementById('phoneError');
        const phoneValue = this.value.replace(/\D/g, '');

        if (phoneValue.length < 10) {
          errorElement.textContent = 'Phone number must be at least 10 digits';
          errorElement.style.display = 'block';
        } else {
          errorElement.style.display = 'none';
        }
      });
    });
  </script>
</body>

</html>